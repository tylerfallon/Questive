{"version":3,"sources":["meteor://ğŸ’»app/packages/jagi:astronomy/lib/main.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/core/class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/core/config.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/core/ejson.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/core/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/core/reserved_keywords.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/behavior.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/class_static_methods/get_behavior.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/class_static_methods/get_behaviors.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/class_static_methods/has_behavior.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/hooks/apply_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/hooks/init_class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/hooks/init_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/hooks/init_schema.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/hooks/merge_definitions.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/behaviors/hooks/parse_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/core/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/core/utils/clone_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/core/utils/override_method.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/core/utils/throw_parse_error.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/core/utils/warn.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/event.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/class_prototype_methods/dispatch_event.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/class_static_methods/dispatch_event.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/class_static_methods/get_events.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/class_static_methods/has_event.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/hooks/apply_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/hooks/init_class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/hooks/init_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/hooks/init_schema.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/hooks/merge_definitions.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/events/hooks/parse_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/Field.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/ListField.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/ObjectField.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/ScalarField.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/enum.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/type.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_events/from_json_value.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_events/to_json_value.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_prototype_methods/get.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_prototype_methods/raw.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_prototype_methods/set.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_static_methods/get_field.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_static_methods/get_fields.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_static_methods/get_fields_names.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_static_methods/get_list_fields.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_static_methods/get_object_fields.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_static_methods/get_scalar_fields.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/class_static_methods/has_field.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/hooks/apply_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/hooks/init_class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/hooks/init_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/hooks/init_schema.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/hooks/merge_definitions.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/hooks/parse_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/types/boolean.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/types/date.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/types/mongo_object_id.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/types/number.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/types/object.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/types/string.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/castToClass.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/cast_nested.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/get_all.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/get_many.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/get_one.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/is_nested_field_name.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/raw_all.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/raw_many.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/raw_one.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/resolve_values.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/set_all.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/set_defaults.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/set_many.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/set_one.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/fields/utils/traverse.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/class_static_methods/get_index.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/class_static_methods/get_indexes.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/class_static_methods/has_index.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/hooks/apply_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/hooks/init_class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/hooks/init_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/hooks/init_schema.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/hooks/merge_definitions.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/indexes/hooks/parse_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/class_static_methods/get_method.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/class_static_methods/get_methods.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/class_static_methods/has_method.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/hooks/apply_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/hooks/init_class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/hooks/init_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/hooks/init_schema.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/hooks/merge_definitions.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/methods/hooks/parse_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_events/after_init.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_events/before_init.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_events/from_json_value.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_events/to_json_value.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_prototype_methods/copy.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_prototype_methods/get_modified.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_prototype_methods/get_modified_values.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_prototype_methods/get_modifier.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_prototype_methods/is_modified.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_prototype_methods/reload.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_prototype_methods/remove.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_prototype_methods/save.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/find.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/get_collection.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/get_transform.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/get_type_field.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/insert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/is_secured.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/remove.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/update.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/class_static_methods/upsert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/hooks/apply_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/hooks/init_class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/hooks/init_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/hooks/init_schema.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/hooks/merge_definitions.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/hooks/parse_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/meteor_methods/insert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/meteor_methods/remove.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/meteor_methods/update.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/meteor_methods/upsert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/already_in_simulation.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/apply_modifier.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/call_meteor_method.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/class_insert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/class_remove.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/class_update.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/class_upsert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/document_insert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/document_remove.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/document_update.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/get_modified.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/get_modifier.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/has_meteor_method.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/is_modified.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/is_remote.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/omit_undefined.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/throw_if_selector_is_not_id.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/transform_to_class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/trigger_after_insert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/trigger_after_remove.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/trigger_after_save.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/trigger_after_update.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/trigger_before_insert.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/trigger_before_remove.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/trigger_before_save.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/storage/utils/trigger_before_update.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/module.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validator.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/class_prototype_methods/validate.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/class_prototype_methods/validate_all.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/class_static_methods/getCheckPattern.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/class_static_methods/get_resolve_error.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/class_static_methods/get_validation_order.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/class_static_methods/get_validators.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/class_static_methods/validate.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/class_static_methods/validateAll.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/hooks/apply_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/hooks/init_class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/hooks/init_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/hooks/init_schema.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/hooks/merge_definitions.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/hooks/parse_definition.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/meteor_methods/validate.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/utils/document_validate.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/utils/parse_validators.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/comparison/choice.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/comparison/email.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/comparison/equal.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/comparison/not_equal.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/comparison/regexp.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/existence/not_null.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/existence/null.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/existence/required.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/logical/and.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/logical/or.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/nested/every.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/nested/has.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/nested/includes.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/size/gt.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/size/gte.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/size/length.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/size/lt.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/size/lte.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/size/max_length.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/size/min_length.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/array.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/boolean.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/class.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/date.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/integer.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/mongo_object_id.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/number.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/object.js","meteor://ğŸ’»app/packages/jagi:astronomy/lib/modules/validators/validators/type/string.js","meteor://ğŸ’»app/../npm/node_modules/lodash/package.json"],"names":[],"mappings":"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","file":"/packages/jagi_astronomy.js","sourcesContent":["import './core/ejson.js';\nimport './modules/core/module.js';\nimport './modules/storage/module.js';\nimport './modules/behaviors/module.js';\nimport './modules/events/module.js';\nimport './modules/methods/module.js';\nimport './modules/fields/module.js';\nimport './modules/indexes/module.js';\nimport './modules/validators/module.js';\n\nimport Config from './core/config.js';\nimport Module from './core/module.js';\nimport Class from './core/class.js';\nimport reservedKeywords from './core/reserved_keywords.js';\nimport Enum from './modules/fields/enum.js';\nimport Type from './modules/fields/type.js';\nimport Field from './modules/fields/Field';\nimport ScalarField from './modules/fields/ScalarField';\nimport ObjectField from './modules/fields/ObjectField';\nimport ListField from './modules/fields/ListField';\nimport Behavior from './modules/behaviors/behavior.js';\nimport Validator from './modules/validators/validator.js';\nimport Validators from './modules/validators/validators.js';\nimport { ValidationError } from 'meteor/mdg:validation-error';\nimport Event from './modules/events/event.js';\n\nconst Astro = {\n  Config,\n  Module,\n  Class,\n  Enum,\n  Type,\n  Field,\n  ScalarField,\n  ObjectField,\n  ListField,\n  Behavior,\n  Validator,\n  Validators,\n  ValidationError,\n  Event,\n  reservedKeywords\n};\n\nexport {\n  Astro,\n  Module,\n  Class,\n  Enum,\n  Type,\n  Field,\n  ScalarField,\n  ObjectField,\n  ListField,\n  Behavior,\n  Validator,\n  Validators,\n  ValidationError,\n  Event,\n  reservedKeywords\n};","import _ from 'lodash';\nimport { EJSON } from 'meteor/ejson';\nimport throwParseError from '../modules/core/utils/throw_parse_error.js';\nimport cloneDefinition from '../modules/core/utils/clone_definition.js';\nimport setDefaults from '../modules/fields/utils/set_defaults.js';\nimport castNested from '../modules/fields/utils/cast_nested.js';\nimport Module from './module.js';\nimport Event from '../modules/events/event.js';\nimport Type from '../modules/fields/type.js';\nimport Validators from '../modules/validators/validators.js';\n\nlet initClass = function(Class) {\n  // Create and store the schema \"definition\" object in the class constructor.\n  // It's a combination of all parent definitions and a definition that\n  // created this class. It's used to create child classes.\n  Class.definition = {};\n  // Create and store the \"schema\" object in the class constructor. It's an\n  // object that contains all the data related with a given class. The\n  // \"schema\" object contains \"computed\" data of the schema \"definition\".\n  // Thanks to that, Astronomy does not need to compute data on the fly and\n  // everything works faster.\n  Class.schema = {};\n  // Create empty array for storing child classes.\n  Class.children = [];\n  // Init the class schema and schema definition.\n  Module.forEach((module) => {\n    module.onInitSchema(Class.schema, Class.getName());\n    module.onInitDefinition(Class.definition, Class.getName());\n  });\n  // We have to call the \"onInitClass\" hooks in the separate loop after\n  // initiation of the schema and schema definition, because some\n  // \"onInitClass\" hooks can execute the \"Class.extend\" method which requires\n  // schema and schama definition to be initalized.\n  Module.forEach((module) => {\n    module.onInitClass(Class, Class.getName());\n  });\n};\n\n// Helper variables for passing information about options to nested documents\n// being initialised during construction.\nlet callsCount = 0;\nlet cloneArgs = null;\n\nclass Class {\n  constructor(rawDoc, options = {}) {\n    // Set default options.\n    _.defaults(options, {\n      defaults: true,\n      clone: true\n    });\n\n    if (callsCount === 0 && cloneArgs === null) {\n      cloneArgs = options.clone;\n    }\n    callsCount++;\n\n    const doc = this;\n    const Class = doc.constructor;\n\n    if (!Class.getName()) {\n      throw new Error(\n        'Can not create instance of the \"Astro.Class\" class'\n      );\n    }\n\n    // Trigger the \"beforeInit\" event handlers.\n    doc.dispatchEvent(new Event('beforeInit'));\n\n    // Clone an argument if the \"clone\" option is set.\n    rawDoc = rawDoc || {};\n    if (cloneArgs) {\n      rawDoc = EJSON.clone(rawDoc);\n    }\n\n    // Set values in a document.\n    const fields = Class.getFields();\n    _.each(fields, (field) => {\n      doc[field.name] = rawDoc[field.name];\n    });\n\n    // Set default values if the \"defaults\" option is set.\n    if (options.defaults) {\n      setDefaults({\n        doc\n      });\n    }\n    // Cast nested documents.\n    castNested({\n      doc,\n      options: {\n        clone: options.clone\n      }\n    });\n\n    // Trigger the \"afterInit\" event handlers.\n    doc.dispatchEvent(new Event('afterInit'));\n\n    // Decrease number of nested documents being initialised.\n    if (callsCount > 0) {\n      callsCount--;\n    }\n    if (callsCount === 0) {\n      cloneArgs = null;\n    }\n  }\n\n  // Method needed for EJSONification.\n  typeName() {\n    return 'Astronomy';\n  }\n\n  toJSONValue(args) {\n    let doc = this;\n    let Class = doc.constructor;\n\n    let json = {\n      class: Class.getName()\n    };\n\n    // Trigger the \"toJSONValue\" event handlers.\n    doc.dispatchEvent(new Event('toJSONValue', {\n      json: json\n    }));\n\n    return json;\n  }\n\n  static getName() {\n    return this.className;\n  }\n\n  static getParent() {\n    if (this.parentClassName) {\n      return this.get(this.parentClassName);\n    }\n  }\n\n  static getChildren() {\n    return this.children;\n  }\n\n  static create(definition) {\n    // Get class name.\n    let className = definition.name;\n    // Extend the Astro.Class class.\n    let Class = this.classes[className] = class Class extends this {};\n    // Store the class name in the constructor.\n    Class.className = className;\n    // Initialize class.\n    initClass(Class);\n    // Extend class with a definition.\n    Class.extend(definition);\n    // Register a new type.\n    Type.create({\n      name: className,\n      class: Class,\n      validate(args) {\n        // Add current class as a param of validator.\n        args.param = Class;\n        Validators.class(args);\n      }\n    });\n\n    return Class;\n  }\n\n  static inherit(definition) {\n    const Parent = this;\n    const className = definition.name;\n\n    // Extend the parent class.\n    const Class = this.classes[className] = class Class extends Parent {};\n\n    // Store the class name in the constructor.\n    Class.className = className;\n    // Store the parent class name in the constructor.\n    Class.parentClassName = Parent.getName();\n    // Initialize class.\n    initClass(Class);\n    // Store child class in the parent class.\n    Parent.children.push(Class);\n    // Extend class with the parent class definition.\n    Class.extend(Parent.definition);\n    // Extend class with the definition.\n    Class.extend(definition);\n    // Register a new type.\n    Type.create({\n      name: className,\n      class: Class,\n      validate(args) {\n        // Add current class as a param of validator.\n        args.param = Class;\n        Validators.class(args);\n      }\n    });\n\n    return Class;\n  }\n\n  static extend(extendDefinition, onlyModules) {\n    if (\n      onlyModules !== undefined &&\n      !Match.test(onlyModules, Match.OneOf(String, [String]))\n    ) {\n      throwParseError([{\n          'class': this.getName()\n        }, {\n          'method': 'extend'\n        },\n        'The second argument has to be a string or an array of strings'\n      ]);\n    }\n\n    if (Match.test(onlyModules, String)) {\n      onlyModules = [onlyModules];\n    }\n\n    // Clone definition to not modify the original one.\n    extendDefinition = cloneDefinition(extendDefinition);\n\n    Module.forEach((module) => {\n      // If the second argument was passed, then we only run module hooks for\n      // modules that were listed in the second argument.\n      if (onlyModules !== undefined && !_.includes(onlyModules, module.name)) {\n        return;\n      }\n      // Initialize parsed definition.\n      let parsedDefinition = {};\n      module.onInitDefinition(parsedDefinition, Class.getName());\n      // Parse the extending definition and put parsed properties in the parsed\n      // definition.\n      module.onParseDefinition(parsedDefinition, extendDefinition, this.getName());\n      // Apply parsed definition.\n      module.onApplyDefinition(this, parsedDefinition, this.getName());\n      // Merge parsed definition with a class definition.\n      module.onMergeDefinitions(this.definition, parsedDefinition, this.getName());\n    });\n  }\n\n  static get(className) {\n    return this.classes[className];\n  }\n\n  static has(className) {\n    return _.has(this.classes, className);\n  }\n\n  static includes(Class) {\n    return _.includes(this.classes, Class);\n  }\n\n  static isParentOf(Class) {\n    if (!Class || !Class.prototype) {\n      return false;\n    }\n    return this.prototype.isPrototypeOf(Class.prototype);\n  }\n\n  static isChildOf(Class) {\n    if (!Class || !Class.prototype) {\n      return false;\n    }\n    return Class.prototype.isPrototypeOf(this.prototype);\n  }\n};\n\nClass.classes = {};\n\nexport default Class;","const Config = {\n\tverbose: true\n};\n\nexport default Config;","import AstroClass from './class.js';\nimport Event from '../modules/events/event.js';\n\nEJSON.addType('Astronomy', function(json) {\n  let Class = AstroClass.get(json.class);\n  let doc = new Class();\n\n  // Trigger the \"fromJSONValue\" event handlers.\n  doc.dispatchEvent(new Event('fromJSONValue', {\n    json: json\n  }));\n\n  return doc;\n});","import _ from 'lodash';\nimport throwParseError from '../modules/core/utils/throw_parse_error.js';\n\nclass Module {\n\tconstructor(definition) {\n\t\tif (!Match.test(definition, Object)) {\n\t\t\tthrowParseError([\n\t\t\t\t'Module definition has to be an object'\n\t\t\t]);\n\t\t}\n\n\t\t// Set module name.\n\t\tif (!Match.test(definition.name, String)) {\n\t\t\tthrowParseError([\n\t\t\t\t'Module name has to be a string'\n\t\t\t]);\n\t\t}\n\t\tlet moduleName = this.name = definition.name;\n\n\t\t// Set module hooks.\n\t\t_.each([\n\t\t\t'onInitSchema', 'onInitDefinition', 'onInitClass', 'onParseDefinition',\n\t\t\t'onApplyDefinition', 'onMergeDefinitions'\n\t\t], (hookName) => {\n\t\t\tif (definition[hookName] === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!Match.test(definition[hookName], Function)) {\n\t\t\t\tthrowParseError([{\n\t\t\t\t\t\t'module': moduleName\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'property': hookName\n\t\t\t\t\t},\n\t\t\t\t\t`The \"${hookName}\" hook has to be a function`\n\t\t\t\t]);\n\t\t\t}\n\t\t\tthis[hookName] = definition[hookName];\n\t\t});\n\n\t\t// Set module utils.\n\t\tif (definition.utils) {\n\t\t\tif (!Match.test(definition.utils, Object)) {\n\t\t\t\tthrowParseError([{\n\t\t\t\t\t\t'module': moduleName\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'property': 'utils'\n\t\t\t\t\t},\n\t\t\t\t\t'Utilities definition has to be an object'\n\t\t\t\t]);\n\t\t\t}\n\t\t\tthis.utils = {};\n\t\t\t_.each(definition.utils, (method, methodName) => {\n\t\t\t\tif (!Match.test(method, Function)) {\n\t\t\t\t\tthrowParseError([{\n\t\t\t\t\t\t\t'module': moduleName\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t'property': 'utils'\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t'method': methodName\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Utility has to be a function'\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t\tthis.utils[methodName] = method;\n\t\t\t});\n\t\t}\n\t}\n\n\tonInitSchema(schema, className) {}\n\tonInitDefinition(definition, className) {}\n\n\tonInitClass(Class, className) {}\n\n\tonParseDefinition(parsedDefinition, definition, className) {}\n\tonApplyDefinition(Class, definition, className) {}\n\tonMergeDefinitions(targetDefinition, sourceDefinition, className) {}\n\n\tstatic create(definition) {\n\t\tlet module = new this(definition);\n\t\tthis.modules[module.name] = module;\n\t\tthis.modulesOrder.push(module.name);\n\t\treturn module;\n\t}\n\n\tstatic get(moduleName) {\n\t\treturn this.modules[moduleName];\n\t}\n\n\tstatic forEach(iteratee) {\n\t\tif (!Match.test(iteratee, Function)) {\n\t\t\tthrowParseError([\n\t\t\t\t'The first argument of the \"Module.forEach\" method has to be a function'\n\t\t\t]);\n\t\t}\n\t\t_.each(this.modulesOrder, (moduleName) => {\n\t\t\titeratee(this.modules[moduleName]);\n\t\t});\n\t}\n};\n\nModule.modules = {};\nModule.modulesOrder = [];\n\nexport default Module;","const reservedNames = [\n  '_isNew',\n  'copy',\n  'dispatchEvent',\n  'get',\n  'getModified',\n  'getModifiedValues',\n  'getModifier',\n  'isModified',\n  'raw',\n  'reload',\n  'remove',\n  'save',\n  'set',\n  'toJSONValue',\n  'typeName',\n  'validate',\n  'validateAll'\n];\n\nexport default reservedNames;","import _ from 'lodash';\nimport throwParseError from '../core/utils/throw_parse_error.js';\n\nconst checkDefinition = function(definition) {\n\t// Check parameters validity.\n\tif (!Match.test(definition, Object)) {\n\t\tthrowParseError([\n\t\t\t'Behavior definition has to be an object'\n\t\t]);\n\t}\n\n\t// Check if behavior name is provided and is a string.\n\tif (!Match.test(definition.name, String)) {\n\t\tthrowParseError([\n\t\t\t'Behavior has to be named'\n\t\t]);\n\t}\n\n\t// Check if behavior with a given name already exists.\n\tif (_.has(Behavior.behaviors, definition.name)) {\n\t\tthrowParseError([{\n\t\t\t\t'behavior': definition.name\n\t\t\t},\n\t\t\t'Behavior already exists'\n\t\t]);\n\t}\n};\n\nclass Behavior {\n\tconstructor(options) {\n\t\tthis.options = _.extend({}, this.options, options);\n\t}\n\n\tcreateClassDefinition() {}\n\n\tapply(Class) {\n\t\tlet definition = this.createClassDefinition();\n\t\tif (definition) {\n\t\t\tClass.extend(definition);\n\t\t}\n\t}\n\n\tstatic create(definition) {\n\t\tcheckDefinition(definition);\n\n\t\t// Get behavior name.\n\t\tlet behaviorName = definition.name;\n\t\t// Extend the Behavior class.\n\t\tlet Behavior = this.behaviors[behaviorName] = class Behavior extends this {};\n\t\t// Store definition in behavior class.\n\t\tBehavior.definition = definition;\n\t\t// Extend prototype with a definition.\n\t\t_.extend(Behavior.prototype, definition);\n\n\t\treturn Behavior;\n\t}\n\n\tstatic get(behaviorName) {\n\t\treturn this.behaviors[behaviorName];\n\t}\n\n\tstatic has(behaviorName) {\n\t\treturn _.has(this.behaviors, behaviorName);\n\t}\n};\n\nBehavior.behaviors = {};\n\nexport default Behavior;","import Module from '../../core/module.js';\n// Hooks.\nimport onInitSchema from './hooks/init_schema.js';\nimport onInitDefinition from './hooks/init_definition.js';\nimport onParseDefinition from './hooks/parse_definition.js';\nimport onMergeDefinitions from './hooks/merge_definitions.js';\nimport onApplyDefinition from './hooks/apply_definition.js';\nimport onInitClass from './hooks/init_class.js';\n\nModule.create({\n\tname: 'behaviors',\n\tonInitSchema: onInitSchema,\n\tonInitDefinition: onInitDefinition,\n\tonParseDefinition: onParseDefinition,\n\tonMergeDefinitions: onMergeDefinitions,\n\tonApplyDefinition: onApplyDefinition,\n\tonInitClass: onInitClass\n});","function getBehavior(behaviorName) {\n  return this.schema.behaviors[behaviorName];\n};\n\nexport default getBehavior;","function getBehaviors() {\n  return this.schema.behaviors;\n};\n\nexport default getBehaviors;","import _ from 'lodash';\n\nfunction hasBehavior(behaviorName) {\n  return _.has(this.schema.behaviors, behaviorName);\n};\n\nexport default hasBehavior;","import _ from 'lodash';\nimport Behavior from '../behavior.js';\n\nfunction onApplyDefinition(Class, parsedDefinition, className) {\n\tlet schema = Class.schema;\n\n\t// Add behaviors to the class.\n\t_.each(parsedDefinition.behaviors, function(behaviorsOptions, behaviorName) {\n\t\t// Get the behavior class.\n\t\tlet BehaviorClass = Behavior.get(behaviorName);\n\t\t_.each(behaviorsOptions, function(behaviorOptions) {\n\t\t\t// Create the behavior instance passing behavior options.\n\t\t\tlet behavior = new BehaviorClass(behaviorOptions);\n\t\t\t// Add behavior to the schema.\n\t\t\tschema.behaviors[behaviorName] = schema.behaviors[behaviorName] || [];\n\t\t\tschema.behaviors[behaviorName].push(behavior);\n\t\t\t// Apply behavior to the class.\n\t\t\tbehavior.apply(Class);\n\t\t});\n\t});\n};\n\nexport default onApplyDefinition;","import getBehavior from '../class_static_methods/get_behavior.js';\nimport getBehaviors from '../class_static_methods/get_behaviors.js';\nimport hasBehavior from '../class_static_methods/has_behavior.js';\n\nfunction onInitClass(Class, className) {\n\tClass.getBehavior = getBehavior;\n\tClass.getBehaviors = getBehaviors;\n\tClass.hasBehavior = hasBehavior;\n};\n\nexport default onInitClass;","function onInitDefinition(definition, className) {\n\tdefinition.behaviors = {};\n};\n\nexport default onInitDefinition;","function onInitSchema(schema, className) {\n\tschema.behaviors = {};\n};\n\nexport default onInitSchema;","import _ from 'lodash';\n\nfunction onMergeDefinitions(targetDefinition, sourceDefinition, ClassName) {\n\t_.each(sourceDefinition.behaviors, function(behaviors, behaviorName) {\n\t\ttargetDefinition.behaviors[behaviorName] =\n\t\t\ttargetDefinition.behaviors[behaviorName] || [];\n\t\ttargetDefinition.behaviors[behaviorName].push(...behaviors);\n\t});\n};\n\nexport default onMergeDefinitions;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport Behavior from '../behavior.js';\n\nfunction onParseDefinition(parsedDefinition, definition, className) {\n\t// Check existence of the \"behaviors\" property.\n\tif (definition.behaviors !== undefined) {\n\t\tif (!Match.test(definition.behaviors, Match.OneOf([String], Object))) {\n\t\t\tthrowParseError([{\n\t\t\t\t\t'class': className\n\t\t\t\t}, {\n\t\t\t\t\t'property': 'behaviors'\n\t\t\t\t},\n\t\t\t\t`Behaviors definition has to be an array of behaviors' names or an ` +\n\t\t\t\t`object with behaviors' options`\n\t\t\t]);\n\t\t}\n\t\t_.each(definition.behaviors, function(behaviorOptions, behaviorName) {\n\t\t\t// If we deal with an array of behaviors' names, then behavior options is\n\t\t\t// an empty object.\n\t\t\tif (_.isString(behaviorOptions)) {\n\t\t\t\tbehaviorName = behaviorOptions;\n\t\t\t\tbehaviorOptions = [{}];\n\t\t\t}\n\t\t\t// Check if behavior with a given name exists.\n\t\t\tif (!Behavior.has(behaviorName)) {\n\t\t\t\tthrowParseError([{\n\t\t\t\t\t\t'class': className\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'behavior': behaviorName\n\t\t\t\t\t},\n\t\t\t\t\t'Behavior does not exist'\n\t\t\t\t]);\n\t\t\t}\n\t\t\t// Behavior options has to be an object or an array of objects, when we\n\t\t\t// are adding multiple behaviors of the same type.\n\t\t\tif (!Match.test(behaviorOptions, Match.OneOf(Object, [Object]))) {\n\t\t\t\tthrowParseError([{\n\t\t\t\t\t\t'class': className\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'behavior': behaviorName\n\t\t\t\t\t},\n\t\t\t\t\t'Behavior options have to be an object or an array of objects'\n\t\t\t\t]);\n\t\t\t}\n\t\t\t// Make sure that behavior options is an array of objects.\n\t\t\tif (!Match.test(behaviorOptions, Array)) {\n\t\t\t\tbehaviorOptions = [behaviorOptions];\n\t\t\t}\n\t\t\tparsedDefinition.behaviors[behaviorName] = behaviorOptions;\n\t\t});\n\t}\n};\n\nexport default onParseDefinition;","import Module from '../../core/module.js';\n// Utils.\nimport cloneDefinition from './utils/clone_definition.js';\nimport overrideMethod from './utils/override_method.js';\nimport throwParseError from './utils/throw_parse_error.js';\nimport warn from './utils/warn.js';\n\nModule.create({\n  name: 'core',\n  utils: {\n    cloneDefinition,\n    overrideMethod,\n    throwParseError,\n    warn\n  }\n});","import _ from 'lodash';\n\nfunction cloneDefinition(definition) {\n\treturn _.cloneDeepWith(definition, function(value) {\n\t\tif (!_.isPlainObject(value) && !_.isArray(value)) {\n\t\t\treturn value;\n\t\t}\n\t});\n};\n\nexport default cloneDefinition;","import _ from 'lodash';\n\nfunction overrideMethod(object, methodName, overridingMethod, param) {\n  // Get original method.\n  let originalMethod = object[methodName];\n\n  // Override original method.\n  object[methodName] = function() {\n    // Convert arguments to array.\n    let args = _.toArray(arguments);\n\n    // Execute overriding method passing arguments, original method and extra\n    // parameters.\n    return overridingMethod.call(this, args, originalMethod, param);\n  };\n};\n\nexport default overrideMethod;","import _ from 'lodash';\n\nfunction throwParseError(details) {\n  let message = '';\n\n  _.each(details, function(detail) {\n    if (_.isObject(detail)) {\n      _.each(detail, function(value, key) {\n        message += '[\"' + value + '\" ' + key + ']'\n      });\n    } else if (_.isString(detail)) {\n      message += ' ' + detail;\n    }\n  });\n\n  throw new TypeError(message);\n};\n\nexport default throwParseError;","import Config from '../../../core/config.js';\n\nfunction warn(warning) {\n  if (console && console.warn && Config.verbose) {\n    console.warn(warning);\n  }\n};\n\nexport default warn;","import _ from 'lodash';\n\nclass Event {\n\tconstructor(type, data) {\n\t\tthis.cancelable = false;\n\t\tthis.propagates = false;\n\n\t\t_.extend(this, data);\n\n\t\tthis.type = type.toLowerCase();\n\t\tthis.timeStamp = Date.now();\n\n\t\tthis.target = null;\n\t\tthis.currentTarget = null;\n\n\t\tthis.defaultPrevented = false;\n\t\tthis.propagationStopped = false;\n\t\tthis.immediatePropagationStopped = false;\n\t}\n\n\tpreventDefault() {\n\t\tthis.defaultPrevented = true;\n\t}\n\n\tstopPropagation() {\n\t\tthis.propagationStopped = true;\n\t}\n\n\tstopImmediatePropagation() {\n\t\tthis.immediatePropagationStopped = true;\n\t\tthis.stopPropagation();\n\t}\n};\n\nexport default Event;","import Module from '../../core/module.js';\n\nimport onInitSchema from './hooks/init_schema.js';\nimport onInitDefinition from './hooks/init_definition.js';\nimport onParseDefinition from './hooks/parse_definition.js';\nimport onMergeDefinitions from './hooks/merge_definitions.js';\nimport onApplyDefinition from './hooks/apply_definition.js';\nimport onInitClass from './hooks/init_class.js';\n\nModule.create({\n\tname: 'events',\n\tonInitSchema: onInitSchema,\n\tonInitDefinition: onInitDefinition,\n\tonParseDefinition: onParseDefinition,\n\tonMergeDefinitions: onMergeDefinitions,\n\tonApplyDefinition: onApplyDefinition,\n\tonInitClass: onInitClass\n});","import _ from 'lodash';\nimport Event from '../event.js';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport { default as AstroClass } from '../../../core/class.js';\n\nfunction returnFromDispatchEvent(event) {\n  // If an event is cancelable and it had been canceled with the\n  // \"preventDefault\" method call, then we return false.\n  if (event.cancelable) {\n    return !event.defaultPrevented;\n  }\n  return true;\n}\n\nfunction dispatchEvent(event) {\n  const doc = this;\n  const Class = doc.constructor;\n\n  if (!Match.test(event, Event)) {\n    throwParseError([{\n        'class': Class.getName()\n      }, {\n        'method': 'dispatchEvent'\n      },\n      'The first argument has to be an event object'\n    ]);\n  }\n\n  // Attach a document to the event as a target.\n  if (event.target === null) {\n    event.target = doc;\n  }\n  if (event.currentTarget === null) {\n    event.currentTarget = doc;\n  }\n\n  // Get all event handlers of a given type.\n  const eventHandlers = Class.getEvents(event.type);\n\n  _.every(eventHandlers, function(eventHandler) {\n    eventHandler(event);\n\n    // Stop execution of the following event handlers, if a flag is set.\n    return !event.immediatePropagationStopped;\n  });\n\n  // If propagation was stopped or bubbling is turned off, then we don't go\n  // deeper into nested fields.\n  if (event.propagationStopped || !event.propagates) {\n    return returnFromDispatchEvent(event);\n  }\n\n  // Object fields.\n  _.each(Class.getObjectFields(), function(field) {\n    let value = doc[field.name];\n    if (value instanceof AstroClass) {\n      event.currentTarget = value;\n      value.dispatchEvent(event);\n    }\n  });\n\n  // List fields.\n  _.each(Class.getListFields(), function(field) {\n    let value = doc[field.name];\n    if (field.isClass && _.isArray(value)) {\n      _.each(value, function(element) {\n        if (element instanceof AstroClass) {\n          event.currentTarget = element;\n          element.dispatchEvent(event);\n        }\n      });\n    }\n  });\n\n  return returnFromDispatchEvent(event);\n}\n\nexport default dispatchEvent;","import _ from 'lodash';\nimport Event from '../event.js';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\n\nfunction returnFromDispatchEvent(event) {\n  // If an event is cancelable and it had been canceled with the\n  // \"preventDefault\" method call, then we return false.\n  if (event.cancelable) {\n    return !event.defaultPrevented;\n  }\n  return true;\n}\n\nfunction dispatchEvent(event) {\n  const Class = this;\n\n  if (!Match.test(event, Event)) {\n    throwParseError([{\n        'class': Class.getName()\n      }, {\n        'method': 'dispatchEvent'\n      },\n      'The first argument has to be an event object'\n    ]);\n  }\n\n  // Attach a document to the event as a target.\n  if (event.target === null) {\n    event.target = Class;\n  }\n  if (event.currentTarget === null) {\n    event.currentTarget = Class;\n  }\n\n  // Get all event handlers of a given type.\n  const eventHandlers = Class.getEvents(event.type);\n\n  _.every(eventHandlers, function(eventHandler) {\n    eventHandler(event);\n\n    // Stop execution of the following event handlers, if a flag is set.\n    return !event.immediatePropagationStopped;\n  });\n\n  return returnFromDispatchEvent(event);\n}\n\nexport default dispatchEvent;","function getEvents(eventName) {\n  let Class = this;\n\n  if (eventName) {\n    eventName = eventName.toLowerCase();\n    return Class.schema.events[eventName] || [];\n  }\n  return Class.schema.events;\n}\n\nexport default getEvents;","import _ from 'lodash';\n\nfunction hasEvent(eventName, eventHandler) {\n  let Class = this;\n\n  eventName = eventName.toLowerCase();\n\n  if (arguments.length === 2) {\n    return _.has(Class.schema.events[eventName], eventHandler);\n  }\n  else if (arguments.length === 1) {\n    return _.has(Class.schema.events, eventName);\n  }\n}\n\nexport default hasEvent;","import _ from 'lodash';\n\nfunction onApplyDefinition(Class, parsedDefinition, className) {\n\tlet schema = Class.schema;\n\n\t// Add events to the event manager.\n\t_.each(parsedDefinition.events, function(eventHandlers, eventName) {\n\t\teventName = eventName.toLowerCase();\n\t\t_.each(eventHandlers, function(eventHandler) {\n\t\t\tschema.events[eventName] = schema.events[eventName] || [];\n\t\t\tschema.events[eventName].push(eventHandler);\n\t\t});\n\t});\n};\n\nexport default onApplyDefinition;","// Class static methods.\nimport dispatchEvent from '../class_static_methods/dispatch_event.js';\nimport getEvents from '../class_static_methods/get_events.js';\nimport hasEvent from '../class_static_methods/has_event.js';\n// Class prototype methods.\nimport { default as dispatchEventProto } from '../class_prototype_methods/dispatch_event.js';\n\nfunction onInitClass(Class, className) {\n  // Class static methods.\n  Class.dispatchEvent = dispatchEvent;\n  Class.getEvents = getEvents;\n  Class.hasEvent = hasEvent;\n  // Class prototype methods.\n  Class.prototype.dispatchEvent = dispatchEventProto;\n}\n\nexport default onInitClass;","function onInitDefinition(definition, className) {\n\tdefinition.events = {};\n};\n\nexport default onInitDefinition;","function onInitSchema(schema, className) {\n\tschema.events = {};\n};\n\nexport default onInitSchema;","import _ from 'lodash';\n\nfunction onMergeDefinitions(targetDefinition, sourceDefinition, ClassName) {\n\t_.each(sourceDefinition.events, function(events, eventName) {\n\t\teventName = eventName.toLowerCase();\n\t\ttargetDefinition.events[eventName] = targetDefinition.events[eventName] || [];\n\t\ttargetDefinition.events[eventName] =\n\t\t\ttargetDefinition.events[eventName].concat(events);\n\t});\n};\n\nexport default onMergeDefinitions;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\n\nfunction onParseDefinition(parsedDefinition, definition, className) {\n\t// Check existence and validity of the \"events\" property.\n\tif (definition.events !== undefined) {\n\t\t_.each(definition.events, function(eventHandlers, eventName) {\n\t\t\teventName = eventName.toLowerCase();\n\t\t\t// Check if the event definition is an array of functions.\n\t\t\tif (!Match.test(eventHandlers, Match.OneOf(Function, [Function]))) {\n\t\t\t\tthrowParseError([{\n\t\t\t\t\t\t'class': className\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'event': eventName\n\t\t\t\t\t},\n\t\t\t\t\t'Event handler has to be a function or an array of functions'\n\t\t\t\t]);\n\t\t\t}\n\t\t\t// Convert function to array of functions.\n\t\t\tif (Match.test(eventHandlers, Function)) {\n\t\t\t\teventHandlers = [eventHandlers];\n\t\t\t}\n\t\t\tparsedDefinition.events[eventName] = eventHandlers;\n\t\t});\n\t}\n};\n\nexport default onParseDefinition;","import _ from 'lodash';\nimport Validators from '../validators/validators.js';\n\nclass Field {\n  constructor(definition = {}) {\n    _.defaults(definition, {\n      optional: false,\n      immutable: false,\n      transient: false\n    });\n\n    this.name = definition.name;\n    this.type = definition.type;\n    this.default = definition.default\n    this.optional = definition.optional;\n    this.immutable = definition.immutable;\n    this.transient = definition.transient;\n    this.resolve = definition.resolve;\n  }\n\n  getDefault() {\n    if (_.isFunction(this.default)) {\n      return this.default();\n    }\n    return this.default;\n  }\n\n  getOptional(doc) {\n    if (_.isFunction(this.optional)) {\n      return this.optional(doc);\n    }\n    return this.optional;\n  }\n\n  cast(value) {\n    return value;\n  }\n\n  validate(args) {\n    // If a field is not optional (required) then it has to have value.\n    if (!this.getOptional(args.doc)) {\n      Validators.required(args);\n    }\n  }\n\n  resolveValue(rawDoc) {\n    if (this.resolve) {\n      return this.resolve(rawDoc);\n    }\n    else {\n      return rawDoc[this.name];\n    }\n  }\n};\n\nexport default Field;","import _ from 'lodash';\nimport Field from './Field';\nimport castToClass from './utils/castToClass';\nimport AstroClass from '../../core/class.js';\nimport Validators from '../validators/validators.js';\n\nclass ListField extends Field {\n  constructor(definition = {}) {\n    super(definition);\n\n    this.isClass = AstroClass.isParentOf(this.type.class);\n  }\n\n  cast(value, options) {\n    if (!_.isArray(value)) {\n      return value;\n    }\n\n    return _.map(value, (element) => {\n      // Class type.\n      if (this.isClass) {\n        // We only cast if value is a plain object.\n        if (!_.isPlainObject(element)) {\n          return element;\n        }\n        // Get class from type property.\n        const Class = this.type.class;\n        // Cast value to an instance of the class.\n        return castToClass({\n          Class,\n          rawDoc: element,\n          options\n        });\n      }\n      // Scalar type.\n      else {\n        return this.type.cast(element);\n      }\n    });\n  }\n\n  validate(args) {\n    super.validate(args);\n    var {\n      doc,\n      name,\n      value\n    } = args;\n\n    if (!_.isNil(value)) {\n      Validators.array(args);\n      _.each(value, (element, index) => {\n        this.type.validate({\n          doc,\n          name: name + '.' + index,\n          value: element\n        });\n      });\n    }\n  }\n};\n\nexport default ListField;\n","import _ from 'lodash';\nimport Field from './Field';\nimport castToClass from './utils/castToClass';\n\nclass ObjectField extends Field {\n  cast(value, options) {\n    // We only cast if value is a plain object.\n    if (!_.isPlainObject(value)) {\n      return value;\n    }\n\n    // Get class from type property.\n    const Class = this.type.class;\n\n    // Cast value to an instance of the class.\n    return castToClass({\n      Class,\n      rawDoc: value,\n      options\n    });\n  }\n\n  validate(args) {\n    super.validate(args);\n\n    this.type.validate(args);\n  }\n};\n\nexport default ObjectField;","import _ from 'lodash';\nimport Field from './Field';\n\nclass ScalarField extends Field {\n  constructor(definition = {}) {\n    super(definition);\n\n    this.type = definition.type;\n  }\n\n  cast(value) {\n    return this.type.cast(value);\n  }\n\n  validate(args) {\n    super.validate(args);\n    var {\n      value\n    } = args;\n\n    if (!_.isNil(value)) {\n      return this.type.validate(args);\n    }\n  }\n};\n\nexport default ScalarField;","import _ from 'lodash';\nimport Type from './type.js';\nimport Validators from '../validators/validators.js';\nimport { check, Match } from 'meteor/check';\n\nconst enumDefinitionPattern = {\n  name: String,\n  identifiers: Match.OneOf(Array, Object)\n};\n\nconst Enum = {\n  create(definition) {\n    check(definition, enumDefinitionPattern);\n\n    // Get identifiers and values.\n    let identifiers;\n    if (Match.test(definition.identifiers, Array)) {\n      identifiers = _.zipObject(\n        definition.identifiers, _.range(definition.identifiers.length)\n      );\n    }\n    else if (Match.test(definition.identifiers, Object)) {\n      identifiers = definition.identifiers;\n      let i = 0;\n      _.forOwn(identifiers, function(value, key) {\n        if (_.isNil(value)) {\n          identifiers[key] = i;\n          i++;\n        }\n        else if (_.isNumber(value)) {\n          i = value + 1;\n        }\n      });\n    }\n    const values = _.values(identifiers);\n    const keys = _.keys(identifiers);\n    // Create a new Enum constructor.\n    const Enum = function Enum(identifier) {\n      return Enum[identifier];\n    };\n    Enum.getIdentifiers = function() {\n      return keys;\n    };\n    Enum.getIdentifier = function(value) {\n      const index = _.indexOf(values, value);\n      return keys[index];\n    };\n    // Set identifiers properties in the class.\n    _.each(identifiers, (value, name) => {\n      if (Object.defineProperty) {\n        Object.defineProperty(Enum, name, {\n          writable: false,\n          enumerable: true,\n          value\n        });\n      }\n      else {\n        Enum[name] = value;\n      }\n    });\n    // Create type definition for the given enum.\n    Type.create({\n      name: definition.name,\n      class: Enum,\n      validate(args) {\n        args.param = values;\n        Validators.choice(args);\n      }\n    });\n    // Store enum in the enums list.\n    this.enums[definition.name] = Enum;\n\n    return Enum;\n  },\n  enums: {}\n};\n\nexport default Enum;","import Module from '../../core/module.js';\n// Types.\nimport './types/boolean.js';\nimport './types/date.js';\nimport './types/mongo_object_id.js';\nimport './types/number.js';\nimport './types/object.js';\nimport './types/string.js';\n// Utils.\nimport castNested from './utils/cast_nested.js';\nimport getAll from './utils/get_all.js';\nimport getMany from './utils/get_many.js';\nimport getOne from './utils/get_one.js';\nimport isNestedFieldName from './utils/is_nested_field_name.js';\nimport rawAll from './utils/raw_all.js';\nimport rawMany from './utils/raw_many.js';\nimport rawOne from './utils/raw_one.js';\nimport setAll from './utils/set_all.js';\nimport setDefaults from './utils/set_defaults.js';\nimport setMany from './utils/set_many.js';\nimport setOne from './utils/set_one.js';\nimport traverse from './utils/traverse.js';\n// Hooks.\nimport onInitSchema from './hooks/init_schema.js';\nimport onInitDefinition from './hooks/init_definition.js';\nimport onParseDefinition from './hooks/parse_definition.js';\nimport onMergeDefinitions from './hooks/merge_definitions.js';\nimport onApplyDefinition from './hooks/apply_definition.js';\nimport onInitClass from './hooks/init_class.js';\n\nModule.create({\n  name: 'fields',\n  onInitSchema,\n  onInitDefinition,\n  onParseDefinition,\n  onMergeDefinitions,\n  onApplyDefinition,\n  onInitClass,\n  utils: {\n    castNested,\n    getAll,\n    getMany,\n    getOne,\n    isNestedFieldName,\n    rawAll,\n    rawMany,\n    rawOne,\n    setAll,\n    setDefaults,\n    setMany,\n    setOne,\n    traverse\n  }\n});","import _ from 'lodash';\nimport Validators from '../validators/validators.js';\n\nconst typeDefinitionPattern = {\n  name: String,\n  class: Match.Any,\n  cast: Match.Optional(Function),\n  validate: Match.Optional(Function)\n};\n\nconst enumDefinitionPattern = {\n  name: String,\n  options: Object\n};\n\nclass Type {\n  constructor(definition) {\n    check(definition, typeDefinitionPattern);\n\n    this.name = definition.name;\n    this.class = definition.class;\n\n    if (_.isFunction(definition.validate)) {\n      this.validate = definition.validate;\n    }\n\n    if (_.isFunction(definition.cast)) {\n      this.cast = definition.cast;\n    }\n  }\n\n  cast(value) {\n    return value;\n  }\n\n  validate(doc, fieldName) {\n    return true;\n  }\n\n  static create(definition) {\n    let type = new Type(definition);\n    this.types[type.name] = type;\n  }\n\n  static get(name) {\n    return this.types[name];\n  }\n\n  static has(name) {\n    return _.has(this.types, name);\n  }\n\n  static find(Class) {\n    return _.find(this.types, (type) => {\n      return type.class.prototype === Class.prototype;\n    });\n  }\n};\n\nType.types = {};\n\nexport default Type;","import setAll from '../utils/set_all.js';\n\nfunction fromJSONValue(e) {\n\tlet doc = e.currentTarget;\n\tsetAll(doc, EJSON.parse(e.json.values));\n};\n\nexport default fromJSONValue;","import getAll from '../utils/get_all.js';\n\nfunction toJSONValue(e) {\n\tlet doc = e.currentTarget;\n\te.json.values = EJSON.stringify(getAll(doc));\n};\n\nexport default toJSONValue;","import getAll from '../utils/get_all.js';\nimport getMany from '../utils/get_many.js';\nimport getOne from '../utils/get_one.js';\n\nfunction get() {\n\tlet doc = this;\n\tlet args = arguments;\n\n\tif (args.length === 0) {\n\t\treturn getAll(doc);\n\t}\n\telse if (args.length === 1) {\n\t\tif (args[0] instanceof Array) {\n\t\t\treturn getMany(doc, args[0]);\n\t\t}\n\t\telse if (typeof args[0] === 'string') {\n\t\t\treturn getOne(doc, args[0]);\n\t\t}\n\t}\n};\n\nexport default get;","import rawAll from '../utils/raw_all.js';\nimport rawMany from '../utils/raw_many.js';\nimport rawOne from '../utils/raw_one.js';\n\nfunction raw() {\n\tlet doc = this;\n\tlet args = arguments;\n\n\tif (args.length === 0) {\n\t\treturn rawAll(doc);\n\t}\n\telse if (args.length === 1) {\n\t\tif (args[0] instanceof Array) {\n\t\t\treturn rawMany(doc, args[0]);\n\t\t}\n\t\telse if (typeof args[0] === 'string') {\n\t\t\treturn rawOne(doc, args[0]);\n\t\t}\n\t}\n};\n\nexport default raw;","import _ from 'lodash';\nimport setMany from '../utils/set_many.js';\nimport setOne from '../utils/set_one.js';\nimport castNested from '../utils/cast_nested.js';\n\nfunction set() {\n  const doc = this;\n  const args = arguments;\n  let options = {\n    clone: true\n  };\n\n  // Setting single field.\n  if (_.isString(args[0]) && args.length >= 2) {\n    // The last argument is an options object.\n    if (_.isObject(args[2])) {\n      _.extend(options, args[2]);\n    }\n    setOne(doc, args[0], args[1], options);\n  }\n  else if (_.isObject(args[0]) && args.length >= 1) {\n    // The last argument is an options object.\n    if (_.isObject(args[1])) {\n      _.extend(options, args[1]);\n    }\n    setMany(doc, args[0], options);\n  }\n\n  // Cast nested documents.\n  castNested({\n    doc,\n    options: {\n      clone: options.clone\n    }\n  });\n};\n\nexport default set;","function getField(fieldName) {\n\treturn this.schema.fields[fieldName];\n};\n\nexport default getField;","import _ from 'lodash';\n\nfunction getFields() {\n\treturn _.values(this.schema.fields);\n};\n\nexport default getFields;","import _ from 'lodash';\n\nfunction getFieldsNames(options) {\n  // Prepare options.\n\toptions = _.extend({\n\t\ttransient: true,\n\t\timmutable: true\n\t}, options);\n\n  const fieldsNames = [];\n  _.each(this.schema.fields, (field, name) => {\n    // Don't get a transient field.\n    if (!options.transient && field.transient) {\n      return;\n    }\n    // Don't get an immutable field.\n    if (!options.immutable && field.immutable) {\n      return;\n    }\n    fieldsNames.push(name);\n  });\n\n\treturn fieldsNames;\n};\n\nexport default getFieldsNames;","import _ from 'lodash';\n\nimport ListField from '../ListField';\n\nfunction getListFields(classOnly = false) {\n  return _.filter(this.getFields(), function(field) {\n    if (classOnly) {\n\t\t\treturn field instanceof ListField && field.isClass;\n\t\t}\n    return field instanceof ListField;\n  });\n};\n\nexport default getListFields;","import _ from 'lodash';\n\nimport ObjectField from '../ObjectField';\n\nfunction getObjectFields() {\n\treturn _.filter(this.getFields(), function(field) {\n\t\treturn field instanceof ObjectField;\n\t});\n};\n\nexport default getObjectFields;","import _ from 'lodash';\n\nimport ScalarField from '../ScalarField';\n\nfunction getScalarFields() {\n\treturn _.filter(this.getFields(), function(field) {\n\t\treturn field instanceof ScalarField;\n\t});\n};\n\nexport default getScalarFields;","import _ from 'lodash';\n\nfunction hasField(fieldName) {\n\treturn _.has(this.schema.fields, fieldName);\n};\n\nexport default hasField;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport Type from '../type.js';\nimport AstroClass from '../../../core/class.js';\nimport ScalarField from '../ScalarField';\nimport ObjectField from '../ObjectField';\nimport ListField from '../ListField';\n\nfunction checkTypeExistence(type, className, fieldName) {\n  if (!type) {\n    throwParseError([{\n        'class': className\n      }, {\n        'property': 'fields'\n      }, {\n        'field': fieldName\n      },\n      'Type does not exist'\n    ]);\n  }\n}\n\nfunction onApplyDefinition(Class, parsedDefinition, className) {\n  _.each(parsedDefinition.fields, function(fieldDefinition, fieldName) {\n    // Prepare field variable.\n    let field;\n    // List field.\n    if (Match.test(fieldDefinition.type, Array)) {\n      let type = Type.find(fieldDefinition.type[0]);\n      checkTypeExistence(type, className, fieldDefinition.name);\n      if (AstroClass.isParentOf(type.class)) {\n        field = new ListField(\n          _.extend({}, fieldDefinition, {\n            type: type\n          })\n        );\n      }\n      else {\n        field = new ListField(\n          _.extend({}, fieldDefinition, {\n            type: type\n          })\n        );\n      }\n    }\n    // Scalar or object field.\n    else {\n      let type = Type.find(fieldDefinition.type);\n      checkTypeExistence(type, className, fieldDefinition.name);\n      if (AstroClass.isParentOf(type.class)) {\n        field = new ObjectField(\n          _.extend({}, fieldDefinition, {\n            type: type\n          })\n        );\n      }\n      else {\n        field = new ScalarField(\n          _.extend({}, fieldDefinition, {\n            type: type\n          })\n        );\n      }\n    }\n\n    // Add a field object to the fields list.\n    Class.schema.fields[fieldName] = field;\n    Class.schema.fieldsNames.push(fieldName);\n  });\n}\n\nexport default onApplyDefinition;","// Class static methods.\nimport getField from '../class_static_methods/get_field.js';\nimport getFieldsNames from '../class_static_methods/get_fields_names.js';\nimport getFields from '../class_static_methods/get_fields.js';\nimport getObjectFields from '../class_static_methods/get_object_fields.js';\nimport getListFields from '../class_static_methods/get_list_fields.js';\nimport getScalarFields from '../class_static_methods/get_scalar_fields.js';\nimport hasField from '../class_static_methods/has_field.js';\n// Class prototype methods.\nimport get from '../class_prototype_methods/get.js';\nimport raw from '../class_prototype_methods/raw.js';\nimport set from '../class_prototype_methods/set.js';\n// Class events.\nimport fromJSONValue from '../class_events/from_json_value.js';\nimport toJSONValue from '../class_events/to_json_value.js';\n\nfunction onInitClass(Class, className) {\n  // Class static methods.\n  Class.getField = getField;\n  Class.getFieldsNames = getFieldsNames;\n  Class.getFields = getFields;\n  Class.getObjectFields = getObjectFields;\n  Class.getListFields = getListFields;\n  Class.getScalarFields = getScalarFields;\n  Class.hasField = hasField;\n  // Class prototype methods.\n  Class.prototype.get = get;\n  Class.prototype.raw = raw;\n  Class.prototype.set = set;\n  // Class events.\n  Class.extend({\n    events: {\n      fromJSONValue,\n      toJSONValue\n    }\n  }, ['events']);\n};\n\nexport default onInitClass;","function onInitDefinition(definition, className) {\n\tdefinition.fields = {};\n};\n\nexport default onInitDefinition;","function onInitSchema(schema, className) {\n  schema.fields = {};\n  schema.fieldsNames = [];\n};\n\nexport default onInitSchema;","import _ from 'lodash';\n\nfunction onMergeDefinitions(targetDefinition, sourceDefinition, className) {\n  _.each(sourceDefinition.fields, function(fieldDefinition, fieldName) {\n    targetDefinition.fields[fieldName] = fieldDefinition;\n  });\n};\n\nexport default onMergeDefinitions;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport Class from '../../../core/class.js';\nimport Type from '../type.js';\nimport reservedKeywords from '../../../core/reserved_keywords.js';\n\nconst typePattern = Match.OneOf(Function, [Function]);\n\nfunction onParseDefinition(parsedDefinition, definition, className) {\n  if (definition.fields === undefined) {\n    return;\n  }\n\n  // Fields definition has to be an object.\n  if (!Match.test(definition.fields, Object)) {\n    throwParseError([{\n        'class': className\n      }, {\n        'property': 'fields'\n      },\n      'Fields definition has to be an object'\n    ]);\n  }\n\n\t_.each(definition.fields, function(fieldDefinition, fieldName) {\n\t\tif (Match.test(fieldDefinition, typePattern)) {\n\t\t\tfieldDefinition = {\n\t\t\t\tname: fieldName,\n\t\t\t\ttype: fieldDefinition\n\t\t\t};\n\t\t}\n\t\telse if (Match.test(fieldDefinition, Object)) {\n\t\t\tfieldDefinition = _.extend(fieldDefinition, {\n\t\t\t\tname: fieldName\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthrowParseError([{\n\t\t\t\t\t'class': className\n\t\t\t\t}, {\n\t\t\t\t\t'property': 'fields'\n\t\t\t\t}, {\n\t\t\t\t\t'field': fieldName\n\t\t\t\t},\n\t\t\t\t'Field definition has to be an object or type'\n\t\t\t]);\n\t\t}\n\n    // Check if a field name is not reserved keyword.\n    if (_.includes(reservedKeywords, fieldName)) {\n      throwParseError([{\n          'class': className\n        }, {\n          'method': fieldName\n        },\n        'Reserved keyword'\n      ]);\n    }\n\n\t\tparsedDefinition.fields[fieldDefinition.name] = fieldDefinition;\n\t});\n};\n\nexport default onParseDefinition;","import Type from '../type.js';\nimport Validators from '../../validators/validators.js';\n\nType.create({\n  name: 'Boolean',\n  class: Boolean,\n  cast(value) {\n    if (_.isString(value) && value.toLowerCase() === 'false' || value === '0') {\n      return false;\n    }\n    return Boolean(value);\n  },\n  validate(args) {\n    Validators.boolean(args);\n  }\n});","import _ from 'lodash';\nimport Type from '../type.js';\nimport Validators from '../../validators/validators.js';\n\nType.create({\n  name: 'Date',\n  class: Date,\n  cast(value) {\n    return new Date(value);\n  },\n  validate(args) {\n    Validators.date(args);\n  }\n});","import Type from '../type.js';\nimport Validators from '../../validators/validators.js';\nimport { Mongo } from 'meteor/mongo';\n\nType.create({\n  name: 'MongoObjectID',\n  class: Mongo.ObjectID,\n  validate(args) {\n    Validators.mongoObjectID(args);\n  }\n});","import Type from '../type.js';\nimport Validators from '../../validators/validators.js';\n\nType.create({\n  name: 'Number',\n  class: Number,\n  cast(value) {\n    return Number(value);\n  },\n  validate(args) {\n    Validators.number(args);\n  }\n});","import Type from '../type.js';\nimport Validators from '../../validators/validators.js';\n\nType.create({\n  name: 'Object',\n  class: Object,\n  validate(args) {\n    Validators.object(args);\n  }\n});","import Type from '../type.js';\nimport Validators from '../../validators/validators.js';\n\nType.create({\n  name: 'String',\n  class: String,\n  cast(value) {\n    return String(value);\n  },\n  validate(args) {\n    Validators.string(args);\n  }\n});","function castToClass(args = {}) {\n  const {\n    Class,\n    rawDoc,\n    options\n  } = args;\n  // If the class has a type field, then we have to check if we are\n  // casting to some of the nested classes.\n  const typeField = Class.getTypeField();\n  if (typeField) {\n    const ChildClass = Class.get(rawDoc[typeField]);\n    if (ChildClass && ChildClass.isChildOf(Class)) {\n      return new ChildClass(rawDoc, options);\n    }\n  }\n  return new Class(rawDoc, options);\n};\n\nexport default castToClass;","import _ from 'lodash';\nimport AstroClass from '../../../core/class.js';\n\nfunction createDocument(Class, rawDoc, options) {\n  // If a nested field has a type field, then we have to check if we are\n  // casting to some of the nested classes.\n  const typeField = Class.getTypeField();\n  if (typeField) {\n    const ChildClass = AstroClass.get(rawDoc[typeField]);\n    if (ChildClass && ChildClass.isChildOf(Class)) {\n      return new ChildClass(rawDoc);\n    }\n  }\n  return new Class(rawDoc, options);\n};\n\nfunction castNested(args = {}) {\n  const {\n    doc,\n    options\n  } = args;\n  _.defaults(options, {\n    clone: true\n  });\n  const Class = doc.constructor;\n\n  _.each(Class.getObjectFields(), (field) => {\n    let value = doc[field.name];\n    // If field value is empty then go to the next one.\n    if (_.isNil(value)) {\n      return;\n    }\n    let NestedClass = field.type.class;\n    if (!(value instanceof NestedClass)) {\n      if (!_.isPlainObject(value)) {\n        return;\n      }\n      doc[field.name] = createDocument(NestedClass, value, options);\n    }\n  });\n\n  _.each(Class.getListFields(), (field) => {\n    let value = doc[field.name];\n    // If field value is empty then go to the next one.\n    if (!_.isArray(value) || !field.isClass) {\n      return;\n    }\n    let NestedClass = field.type.class;\n    _.each(value, (element, index) => {\n      if (!(element instanceof NestedClass)) {\n        if (!_.isPlainObject(element)) {\n          return;\n        }\n        value[index] = createDocument(NestedClass, element, options);\n      }\n    });\n  });\n};\n\nexport default castNested;","import getMany from './get_many.js';\n\nfunction getAll(doc, options) {\n\tlet Class = doc.constructor;\n\n\t// Get list of fields and their values.\n\treturn getMany(doc, Class.getFieldsNames(), options);\n};\n\nexport default getAll;","import _ from 'lodash';\nimport getOne from './get_one.js';\n\nfunction getMany(doc, fieldNames, options) {\n\tlet values = {};\n\n\t_.each(fieldNames, (fieldName) => {\n\t\tlet fieldValue = getOne(doc, fieldName, options);\n\t\tif (fieldValue !== undefined) {\n\t\t\tvalues[fieldName] = fieldValue;\n\t\t}\n\t});\n\n\treturn values;\n};\n\nexport default getMany;","import _ from 'lodash';\nimport traverse from '../utils/traverse.js';\n\nfunction getOne(doc, fieldPattern, options) {\n\t// Prepare options.\n\toptions = _.extend({\n\t\ttransient: true,\n\t\timmutable: true\n\t}, options);\n\n\treturn traverse(\n\t\tdoc, fieldPattern,\n\t\tfunction(nestedDoc, nestedFieldName, field) {\n\t\t\t// If a field does not exist than we don't return anything.\n\t\t\tif (!field) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't get a transient field.\n\t\t\tif (!options.transient && field.transient) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't get an immutable field.\n\t\t\tif (!options.immutable && field.immutable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Just return a value.\n\t\t\treturn nestedDoc[nestedFieldName];\n\t\t}\n\t);\n};\n\nexport default getOne;","function isNestedFieldName(fieldPattern) {\n  return fieldPattern.indexOf('.') !== -1;\n};\n\nexport default isNestedFieldName;","import rawMany from './raw_many.js';\n\nfunction rawAll(doc, options) {\n\tlet Class = doc.constructor;\n\n\t// Get list of fields and their values.\n\treturn rawMany(doc, Class.getFieldsNames(options), options);\n};\n\nexport default rawAll;","import _ from 'lodash';\nimport rawOne from './raw_one.js';\n\nfunction rawMany(doc, fieldNames, options) {\n  let values = {};\n\n  _.each(fieldNames, (fieldName) => {\n    values[fieldName] = rawOne(doc, fieldName, options);\n  });\n\n  return values;\n};\n\nexport default rawMany;","import _ from 'lodash';\nimport AstroClass from '../../../core/class.js';\nimport traverse from './traverse.js';\nimport rawAll from './raw_all.js';\n\nfunction rawOne(doc, fieldPattern, options) {\n\t// Prepare options.\n\toptions = _.extend({\n\t\ttransient: true,\n\t\timmutable: true\n\t}, options);\n\n\treturn traverse(\n\t\tdoc, fieldPattern,\n\t\tfunction(nestedDoc, nestedFieldName, field) {\n\t\t\t// If a field does not exist than we don't return anything.\n\t\t\tif (!field) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't get a transient field.\n\t\t\tif (!options.transient && field.transient) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Don't get an immutable field.\n\t\t\tif (!options.immutable && field.immutable) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Get a value to be returned.\n\t\t\tlet fieldValue = nestedDoc[nestedFieldName];\n\n\t\t\tif (fieldValue instanceof AstroClass) {\n\t\t\t\treturn rawAll(fieldValue, options);\n\t\t\t}\n\t\t\telse if (_.isArray(fieldValue)) {\n\t\t\t\treturn _.map(fieldValue, function(element) {\n\t\t\t\t\tif (element instanceof AstroClass) {\n\t\t\t\t\t\treturn rawAll(element, options);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\treturn element;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn fieldValue;\n\t\t\t}\n\t\t}\n\t);\n};\n\nexport default rawOne;","import _ from 'lodash';\n\nfunction resolveValues(args) {\n  const {\n    Class,\n    values\n  } = args;\n  const fields = Class.getFields();\n  const resolvedValues = {};\n  _.each(fields, (field) => {\n    resolvedValues[field.name] = field.resolveValue(values);\n  });\n  return resolvedValues;\n};\n\nexport default resolveValues;","import _ from 'lodash';\nimport setOne from './set_one.js';\n\nfunction setAll(doc, fieldsValues, options = {}) {\n  _.defaults(options, {\n    clone: true\n  });\n  const Class = doc.constructor;\n\n  // Get names of the fields that are not present in the fieldsValues variable.\n  const fieldsNames = _.difference(Class.getFieldsNames(), _.keys(fieldsValues));\n\n  _.each(fieldsNames, (fieldName) => {\n    setOne(doc, fieldName, undefined, options);\n  });\n\n  _.forOwn(fieldsValues, (fieldValue, fieldName) => {\n    setOne(doc, fieldName, fieldValue, options);\n  });\n};\n\nexport default setAll;","import _ from 'lodash';\n\nfunction setDefaults(args = {}) {\n  const {\n    doc\n  } = args;\n  const Class = doc.constructor;\n\n  _.each(Class.getFields(), (field) => {\n    const value = doc[field.name];\n    if (value === undefined) {\n      doc[field.name] = field.getDefault();\n    }\n  });\n}\n\nexport default setDefaults;","import _ from 'lodash';\nimport setOne from './set_one.js';\n\nfunction setMany(doc, fieldsValues, options = {}) {\n  _.defaults(options, {\n    clone: true\n  });\n\n  // Set multiple fields.\n  _.forOwn(fieldsValues, (setValue, fieldName) => {\n    setOne(doc, fieldName, setValue, options);\n  });\n};\n\nexport default setMany;","import _ from 'lodash';\nimport { EJSON } from 'meteor/ejson';\nimport traverse from '../utils/traverse.js';\nimport warn from '../../core/utils/warn.js';\n\nfunction setOne(doc, fieldPattern, fieldValue, options = {}) {\n  _.defaults(options, {\n    clone: true\n  });\n\n  if (options.clone && _.isObject(fieldValue)) {\n    fieldValue = EJSON.clone(fieldValue);\n  }\n\n  return traverse(\n    doc, fieldPattern,\n    function(nestedDoc, nestedFieldName, field) {\n      // If a field does not exist than we don't return anything.\n      if (!field) {\n        let Class = doc.constructor;\n        warn(\n          '[\"' + Class.getName() + '\" class][\"' + fieldPattern + '\" field] ' +\n          'Trying to set a value of the field that does not exist in the class'\n        );\n        return;\n      }\n\n      nestedDoc[nestedFieldName] = fieldValue;\n    }\n  );\n};\n\nexport default setOne;","import _ from 'lodash';\nimport isNestedFieldName from './is_nested_field_name.js';\nimport AstroClass from '../../../core/class.js';\n\nfunction traverse(doc, name, callback) {\n  if (!doc) {\n    return;\n  }\n\n  let Class;\n  let field;\n\n  // Check whether the given field name is a nested field name.\n  if (!isNestedFieldName(name)) {\n    // Get a class.\n    let Class = doc.constructor;\n    // Get a field definition.\n    let field = Class.getField(name);\n    // Execute the callback function passing the last nested document, the last\n    // segment name and a field object.\n    return callback(doc, name, field);\n  }\n\n  // Split the nested field pattern name by the \".\" character.\n  let segments = name.split('.');\n  // Get the last and one before the last index.\n  let lastIndex = segments.length - 1;\n\n  // Traverse nested fields until reaching the last one from the pattern.\n  let next = function(nestedDoc, segmentIndex) {\n    segmentIndex = segmentIndex || 0;\n    // Get a nested field name under the given index.\n    let segment = segments[segmentIndex];\n    // Check if a nested document is an instance of the Astronomy class and get\n    // a field object for a given field name;\n    if (nestedDoc instanceof AstroClass) {\n      // Get a class for of a nested document.\n      Class = nestedDoc.constructor;\n      // Get a field object from the nested class.\n      field = Class.getField(segment);\n    }\n    if (segmentIndex === lastIndex) {\n      // Execute the callback function, if we reached the last nested document.\n      return callback(nestedDoc, segment, field);\n    }\n    else if (_.isObject(nestedDoc[segment])) {\n      // Go deeper if a value of the current nested document is an object.\n      return next(nestedDoc[segment], segmentIndex + 1);\n    }\n  };\n\n  // Start traversing nested fields.\n  return next(doc);\n};\n\nexport default traverse;","import Module from '../../core/module.js';\n// Hooks.\nimport onInitSchema from './hooks/init_schema.js';\nimport onInitDefinition from './hooks/init_definition.js';\nimport onParseDefinition from './hooks/parse_definition.js';\nimport onMergeDefinitions from './hooks/merge_definitions.js';\nimport onApplyDefinition from './hooks/apply_definition.js';\nimport onInitClass from './hooks/init_class.js';\n\nModule.create({\n\tname: 'indexes',\n\tonInitSchema: onInitSchema,\n\tonInitDefinition: onInitDefinition,\n\tonParseDefinition: onParseDefinition,\n\tonMergeDefinitions: onMergeDefinitions,\n\tonApplyDefinition: onApplyDefinition,\n\tonInitClass: onInitClass\n});","function getIndex(indexName) {\n\treturn this.schema.indexes[indexName];\n};\n\nexport default getIndex;","function getIndexes() {\n\treturn this.schema.indexes;\n};\n\nexport default getIndexes;","import _ from 'lodash';\n\nfunction hasIndex(indexName) {\n\treturn _.has(this.schema.indexes, indexName);\n};\n\nexport default hasIndex;","import _ from 'lodash';\n\nfunction onApplyDefinition(Class, parsedDefinition, className) {\n\tconst Collection = Class.getCollection();\n\n\tif (\n\t\t!Meteor.isServer ||\n    !Collection ||\n\t\t(Collection && !Collection._connection)\n\t) {\n\t\treturn;\n\t}\n\n\tconst schema = Class.schema;\n\n\tfunction prefixIndexes(indexes, fieldName) {\n\t\t// Prefix the fields property.\n\t\t_.each(indexes, (index, indexName) => {\n\t\t\tindex.fields = _.mapKeys(index.fields, (value, key) => {\n\t\t\t\treturn `${fieldName}.${key}`;\n\t\t\t});\n\t\t\t_.extend(index.options, {\n\t\t\t\tname: `${fieldName}.${indexName}`\n\t\t\t});\n\t\t});\n\t\t// Prefix object keys.\n\t\tindexes = _.mapKeys(indexes, (index, indexName) => {\n\t\t\treturn `${fieldName}.${indexName}`;\n\t\t});\n\t\treturn indexes;\n\t}\n\n\t// Add indexes to the collection from nested classes.\n\tfunction collectNestedIndexes(Class) {\n\t\tconst indexes = {};\n\t\tconst fields = _.concat(\n\t\t\tClass.getObjectFields(), Class.getListFields(true)\n\t\t);\n\t\t_.each(fields, (field) => {\n\t\t\t_.extend(\n\t\t\t\tindexes,\n\t\t\t\tprefixIndexes(field.type.class.definition.indexes, field.name),\n\t\t\t\tprefixIndexes(collectNestedIndexes(field.type.class), field.name)\n\t\t\t);\n\t\t});\n\t\treturn indexes;\n\t}\n\n  const indexes = _.extend(\n    {},\n    parsedDefinition.indexes,\n    collectNestedIndexes(Class)\n  );\n\n\t_.each(indexes, (index, indexName) => {\n\t\tschema.indexes[indexName] = index;\n\t\tCollection._ensureIndex(index.fields, index.options);\n\t});\n};\n\nexport default onApplyDefinition;","// Class static methods.\nimport getIndex from '../class_static_methods/get_index.js';\nimport getIndexes from '../class_static_methods/get_indexes.js';\nimport hasIndex from '../class_static_methods/has_index.js';\n\nfunction onInitClass(Class, className) {\n\t// Class static methods.\n\tClass.getIndex = getIndex;\n\tClass.getIndexes = getIndexes;\n\tClass.hasIndex = hasIndex;\n};\n\nexport default onInitClass;","function onInitDefinition(definition, className) {\n\tdefinition.indexes = {};\n};\n\nexport default onInitDefinition;","function onInitSchema(schema, className) {\n\tschema.indexes = {};\n};\n\nexport default onInitSchema;","import _ from 'lodash';\n\nfunction onMergeDefinitions(targetDefinition, sourceDefinition, ClassName) {\n\t_.each(sourceDefinition.indexes, function(index, indexName) {\n\t\ttargetDefinition.indexes[indexName] = index;\n\t});\n};\n\nexport default onMergeDefinitions;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\n\nconst fieldDefinitionPattern = Match.ObjectIncluding({\n\tindex: Match.OneOf(1, -1, String)\n});\n\nfunction onParseDefinition(parsedDefinition, definition, className) {\n\t// Check existence and validity of the \"indexes\" property.\n\tif (definition.indexes !== undefined) {\n\t\t_.each(definition.indexes, (index, indexName) => {\n\t\t\tif (!Match.test(index, Object)) {\n\t\t\t\tthrowParseError([{\n\t\t\t\t\t\t'class': className\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'index': indexName\n\t\t\t\t\t},\n\t\t\t\t\t'Indexes definition has to be an object'\n\t\t\t\t]);\n\t\t\t}\n\t\t\tindex = {\n\t\t\t\tfields: index.fields,\n\t\t\t\toptions: index.options || {}\n\t\t\t};\n\t\t\tindex.options.name = index.options.name || indexName;\n\t\t\tparsedDefinition.indexes[indexName] = index;\n\t\t});\n\t}\n\n\tif (definition.fields !== undefined) {\n\t\t_.each(definition.fields, (fieldDefinition, fieldName) => {\n\t\t\t// Stop if a field definition does not contain index information.\n\t\t\tif (!Match.test(fieldDefinition, fieldDefinitionPattern)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Prepare an index definition.\n\t\t\tlet indexDefinition = {\n\t\t\t\tfields: {},\n\t\t\t\toptions: {\n\t\t\t\t\tname: fieldName\n\t\t\t\t}\n\t\t\t};\n\t\t\tindexDefinition.fields[fieldName] = fieldDefinition.index;\n\t\t\tparsedDefinition.indexes[fieldName] = indexDefinition;\n\t\t});\n\t}\n};\n\nexport default onParseDefinition;","import Module from '../../core/module.js';\n// Hooks.\nimport onInitSchema from './hooks/init_schema.js';\nimport onInitDefinition from './hooks/init_definition.js';\nimport onParseDefinition from './hooks/parse_definition.js';\nimport onMergeDefinitions from './hooks/merge_definitions.js';\nimport onApplyDefinition from './hooks/apply_definition.js';\nimport onInitClass from './hooks/init_class.js';\n\nModule.create({\n\tname: 'methods',\n\tonInitSchema: onInitSchema,\n\tonInitDefinition: onInitDefinition,\n\tonParseDefinition: onParseDefinition,\n\tonMergeDefinitions: onMergeDefinitions,\n\tonApplyDefinition: onApplyDefinition,\n\tonInitClass: onInitClass\n});","function getMethod(methodName) {\n\treturn this.schema.methods[methodName];\n};\n\nexport default getMethod;","function getMethods() {\n\treturn this.schema.methods;\n};\n\nexport default getMethods;","import _ from 'lodash';\n\nfunction hasMethod(methodName) {\n\treturn _.has(this.schema.methods, methodName);\n};\n\nexport default hasMethod;","import _ from 'lodash';\n\nfunction onApplyDefinition(Class, parsedDefinition, className) {\n\tlet schema = Class.schema;\n\n\t// Add methods to the class.\n\t_.each(parsedDefinition.methods, (method, methodName) => {\n\t\tschema.methods[methodName] = method;\n\t\tClass.prototype[methodName] = method;\n\t});\n};\n\nexport default onApplyDefinition;","// Class static methods.\nimport getMethod from '../class_static_methods/get_method.js';\nimport getMethods from '../class_static_methods/get_methods.js';\nimport hasMethod from '../class_static_methods/has_method.js';\n\nfunction onInitClass(Class, className) {\n\t// Class static methods.\n\tClass.getMethod = getMethod;\n\tClass.getMethods = getMethods;\n\tClass.hasMethod = hasMethod;\n};\n\nexport default onInitClass;","function onInitDefinition(definition, className) {\n\tdefinition.methods = {};\n};\n\nexport default onInitDefinition;","function onInitSchema(schema, className) {\n\tschema.methods = {};\n};\n\nexport default onInitSchema;","import _ from 'lodash';\n\nfunction onMergeDefinitions(targetDefinition, sourceDefinition, ClassName) {\n\t_.each(sourceDefinition.methods, function(method, methodName) {\n\t\ttargetDefinition.methods[methodName] = method;\n\t});\n};\n\nexport default onMergeDefinitions;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport reservedKeywords from '../../../core/reserved_keywords.js';\n\nfunction onParseDefinition(parsedDefinition, definition, className) {\n\t// Check existence and validity of the \"methods\" property.\n\tif (definition.methods !== undefined) {\n\t\tif (!Match.test(definition.methods, Object)) {\n\t\t\tthrowParseError([{\n\t\t\t\t\t'class': className\n\t\t\t\t}, {\n\t\t\t\t\t'property': 'methods'\n\t\t\t\t},\n\t\t\t\t'Methods definition has to be an object'\n\t\t\t]);\n\t\t}\n\n\t\t_.each(definition.methods, function(method, methodName) {\n\t\t\tif (!Match.test(method, Function)) {\n\t\t\t\tthrowParseError([{\n\t\t\t\t\t\t'class': className\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'method': methodName\n\t\t\t\t\t},\n\t\t\t\t\t'Method has to be a function'\n\t\t\t\t]);\n\t\t\t}\n\n      if (_.includes(reservedKeywords, methodName)) {\n        throwParseError([{\n\t\t\t\t\t\t'class': className\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'method': methodName\n\t\t\t\t\t},\n\t\t\t\t\t'Reserved keyword'\n\t\t\t\t]);\n      }\n\t\t\tparsedDefinition.methods[methodName] = method;\n\t\t});\n\t}\n};\n\nexport default onParseDefinition;","import Module from '../../core/module.js';\n// Utils.\nimport applyModifier from './utils/apply_modifier.js';\nimport callMeteorMethod from './utils/call_meteor_method.js';\nimport classInsert from './utils/class_insert.js';\nimport classUpdate from './utils/class_update.js';\nimport classRemove from './utils/class_remove.js';\nimport documentInsert from './utils/document_insert.js';\nimport documentUpdate from './utils/document_update.js';\nimport documentRemove from './utils/document_remove.js';\nimport getModified from './utils/get_modified.js';\nimport getModifier from './utils/get_modifier.js';\nimport hasMeteorMethod from './utils/has_meteor_method.js';\nimport isModified from './utils/is_modified.js';\nimport isRemote from './utils/is_remote.js';\nimport omitUndefined from './utils/omit_undefined.js';\nimport throwIfSelectorIsNotId from './utils/throw_if_selector_is_not_id.js';\nimport transformToClass from './utils/transform_to_class.js';\nimport triggerBeforeSave from './utils/trigger_before_save.js';\nimport triggerBeforeInsert from './utils/trigger_before_insert.js';\nimport triggerBeforeUpdate from './utils/trigger_before_update.js';\nimport triggerBeforeRemove from './utils/trigger_before_remove.js';\nimport triggerAfterSave from './utils/trigger_after_save.js';\nimport triggerAfterInsert from './utils/trigger_after_insert.js';\nimport triggerAfterUpdate from './utils/trigger_after_update.js';\nimport triggerAfterRemove from './utils/trigger_after_remove.js';\n// Hooks.\nimport onInitSchema from './hooks/init_schema.js';\nimport onInitDefinition from './hooks/init_definition.js';\nimport onParseDefinition from './hooks/parse_definition.js';\nimport onMergeDefinitions from './hooks/merge_definitions.js';\nimport onApplyDefinition from './hooks/apply_definition.js';\nimport onInitClass from './hooks/init_class.js';\n\nModule.create({\n  name: 'storage',\n  onInitSchema: onInitSchema,\n  onInitDefinition: onInitDefinition,\n  onParseDefinition: onParseDefinition,\n  onMergeDefinitions: onMergeDefinitions,\n  onApplyDefinition: onApplyDefinition,\n  onInitClass: onInitClass,\n  utils: {\n    applyModifier,\n    callMeteorMethod,\n    classInsert,\n    classUpdate,\n    classRemove,\n    documentInsert,\n    documentUpdate,\n    documentRemove,\n    getModified,\n    getModifier,\n    hasMeteorMethod,\n    isModified,\n    isRemote,\n    omitUndefined,\n    throwIfSelectorIsNotId,\n    transformToClass,\n    triggerBeforeSave,\n    triggerBeforeInsert,\n    triggerBeforeUpdate,\n    triggerBeforeRemove,\n    triggerAfterSave,\n    triggerAfterInsert,\n    triggerAfterUpdate,\n    triggerAfterRemove\n  }\n});","function afterInit(e) {\n  let doc = e.currentTarget;\n  let Class = doc.constructor;\n\n  let typeField = Class.getTypeField();\n  if (!doc[typeField]) {\n    doc[typeField] = Class.getName();\n  }\n};\n\nexport default afterInit;","function beforeInit(e) {\n\tlet doc = e.currentTarget;\n\n\t// Create the \"_isNew\" property to indicate if a document had been\n\t// stored in a database. A default value of this property is set\n\t// to false. Astronomy can modify this property and it can not appear\n\t// in the list of the object properties.\n\tif (Object.defineProperty) {\n\t\tObject.defineProperty(doc, '_isNew', {\n\t\t\twritable: true,\n\t\t\tenumerable: false\n\t\t});\n\t}\n\tdoc._isNew = true;\n};\n\nexport default beforeInit;","function fromJSONValue(e) {\n\tlet doc = e.currentTarget;\n\tdoc._isNew = e.json.isNew;\n};\n\nexport default fromJSONValue;","function toJSONValue(e) {\n\tlet doc = e.currentTarget;\n\te.json.isNew = doc._isNew;\n};\n\nexport default toJSONValue;","function copy(save) {\n\tlet doc = this;\n\tsave = save || false;\n\n\t// Use EJSON to clone object.\n\tlet copy = EJSON.clone(doc);\n\n\t// Remove the \"_id\" value and set the \"_isNew\" flag to false so that it will\n\t// save the object as a new document instead updating the old one.\n\tcopy._id = null;\n\tcopy._isNew = true;\n\n\tif (save) {\n\t\tcopy.save();\n\t}\n\n\treturn copy;\n};\n\nexport default copy;","import utilGetModified from '../utils/get_modified.js';\n\nfunction getModified() {\n\tlet doc = this;\n\n\treturn utilGetModified({\n\t\tdoc,\n\t\ttransient: true\n\t});\n};\n\nexport default getModified;","import _ from 'lodash';\nimport utilGetModified from '../utils/get_modified.js';\nimport rawOne from '../../fields/utils/raw_one.js';\n\nfunction getModifiedValues(options = {}) {\n  let {\n    old = false,\n    raw = false\n  } = options;\n\n  let doc = this;\n  const Class = doc.constructor;\n\n  // Get list of modified fields.\n  const modified = utilGetModified({\n    doc,\n    transient: true\n  });\n\n  // Get old or new values of a document.\n  if (old) {\n    doc = doc._isNew ? new Class() : Class.findOne(doc._id);\n  }\n\n  // Collect values for each field.\n  const values = {};\n  _.each(modified, (name) => {\n    if (raw) {\n      values[name] = rawOne(doc, name);\n    }\n    else {\n      values[name] = doc.get(name);\n    }\n  });\n\n  return values;\n};\n\nexport default getModifiedValues;","import utilGetModifier from '../utils/get_modifier.js';\n\nfunction getModifier() {\n\tlet doc = this;\n\n\treturn utilGetModifier({\n\t\tdoc\n\t});\n};\n\nexport default getModifier;","import utilIsModified from '../utils/is_modified.js';\n\nfunction isModified(pattern) {\n\tlet doc = this;\n\n\treturn utilIsModified({\n\t\tdoc,\n\t\tpattern,\n\t\ttransient: true\n\t});\n};\n\nexport default isModified;","import _ from 'lodash';\nimport setDefaults from '../../fields/utils/set_defaults.js';\nimport castNested from '../../fields/utils/cast_nested.js';\nimport Event from '../../events/event.js';\n\nfunction reload() {\n\tconst doc = this;\n\tconst Class = doc.constructor;\n\n\t// The document has to be already saved in the collection.\n\tif (!doc._isNew) {\n\t\t// Get a document from the collection without transformation.\n\t\tconst rawDoc = Class.findOne(doc._id, {\n\t\t\ttransform: null\n\t\t});\n\n\t\t// Trigger the \"beforeInit\" event handlers.\n\t\tdoc.dispatchEvent(new Event('beforeInit'));\n\n\t\t// Set all fields.\n\t\tconst fields = Class.getFields();\n    _.each(fields, (field) => {\n      doc[field.name] = field.resolveValue(rawDoc);\n    });\n\n    // Set default values if the \"defaults\" option is set.\n    setDefaults({\n      doc\n    });\n    // Cast nested documents.\n    castNested({\n      doc\n    });\n\n\t\t// Trigger the \"afterInit\" event handlers.\n\t\tdoc.dispatchEvent(new Event('afterInit'));\n\n\t\t// Mark the document as not new.\n\t\tdoc._isNew = false;\n\t}\n};\n\nexport default reload;","import documentRemove from '../utils/document_remove.js';\nimport isRemote from '../utils/is_remote.js';\nimport callMeteorMethod from '../utils/call_meteor_method.js';\n\nfunction remove(args = {}, callback) {\n  let doc = this;\n  let Class = doc.constructor;\n\n  // If the first argument is callback function then reassign values.\n  if (arguments.length === 1 && Match.test(args, Function)) {\n    callback = args;\n    args = {};\n  }\n  // Get variables from the first argument.\n  let {\n    simulation = true\n  } = args;\n\n  // If we are dealing with a remote collection and we are not on the server.\n  if (isRemote(Class)) {\n    // Prepare meteor method name to be called.\n    let methodName = '/Astronomy/remove';\n    // Prepare arguments for the meteor method.\n    let methodArgs = {\n      className: Class.getName(),\n      selector: {\n        _id: doc._id\n      },\n      simulation\n    };\n\n    try {\n      // Run meteor method.\n      let result = callMeteorMethod(\n        Class, methodName, [methodArgs], callback\n      );\n      // Change the \"_isNew\" flag to \"true\". After removing a document can be\n      // saved again as a new one.\n      doc._isNew = true;\n      // Return result of the meteor method call.\n      return result;\n    }\n    // Catch stub exceptions.\n    catch (err) {\n      if (callback) {\n        callback(err);\n        return null;\n      }\n      throw err;\n    }\n  }\n\n  // If we can just remove a document without calling the meteor method. We may\n  // be on the server or the collection may be local.\n  try {\n    // Prepare arguments.\n    let methodArgs = {\n      doc,\n      simulation,\n      trusted: true\n    };\n    let result = documentRemove(methodArgs);\n    if (callback) {\n      callback(undefined, result);\n    }\n    return result;\n  }\n  catch (err) {\n    if (callback) {\n      callback(err);\n      return null;\n    }\n    throw err;\n  }\n}\n\nexport default remove;","import _ from 'lodash';\nimport { DDP } from 'meteor/ddp';\nimport documentInsert from '../utils/document_insert.js';\nimport documentUpdate from '../utils/document_update.js';\nimport isRemote from '../utils/is_remote.js';\nimport callMeteorMethod from '../utils/call_meteor_method.js';\nimport rawAll from '../../fields/utils/raw_all.js';\nimport castNested from '../../fields/utils/cast_nested.js';\nimport getModifier from '../../storage/utils/get_modifier.js';\n\nfunction save(args = {}, callback) {\n  const doc = this;\n  const Class = doc.constructor;\n  const Collection = Class.getCollection();\n\n  // If the first argument is callback function then reassign values.\n  if (arguments.length === 1 && Match.test(args, Function)) {\n    callback = args;\n    args = {};\n  }\n  // Get variables from the first argument.\n  const {\n    stopOnFirstError,\n    simulation,\n    fields\n  } = args;\n\n  // Cast nested documents.\n  castNested({\n    doc\n  });\n\n  // Detect which operation we are executing.\n  const inserting = doc._isNew;\n\n  // Generate ID if not provided.\n  if (inserting && !doc._id) {\n    let generateId = true;\n    // Don't generate the id if we're the client and the 'outermost' call.\n    // This optimization saves us passing both the randomSeed and the id.\n    // Passing both is redundant.\n    if (Collection._isRemoteCollection()) {\n      const enclosing = DDP._CurrentInvocation.get();\n      if (!enclosing) {\n        generateId = false;\n      }\n    }\n    if (generateId) {\n      doc._id = Collection._makeNewID();\n    }\n  }\n\n  // If we are dealing with a remote collection and we are not on the server.\n  if (isRemote(Class)) {\n    // Prepare meteor method name to be called.\n    const methodName = '/Astronomy/' + (inserting ? 'insert' : 'update');\n    // Prepare arguments for meteor method.\n    const methodArgs = {\n      className: Class.getName(),\n      stopOnFirstError,\n      simulation,\n    };\n    // Inserting.\n    if (inserting) {\n      _.extend(methodArgs, {\n        rawDoc: rawAll(doc, {\n          transient: false\n        })\n      });\n    }\n    // Updating.\n    else {\n      _.extend(methodArgs, {\n        selector: {\n          _id: doc._id\n        },\n        modifier: getModifier({\n          doc\n        }),\n        options: {},\n        fields\n      });\n    }\n\n    try {\n      // Run Meteor method.\n      const result = callMeteorMethod(\n        Class, methodName, [methodArgs], callback\n      );\n      if (result && inserting) {\n        // In the insert operation the value return from the meteor method is\n        // a document ID.\n        doc._id = result;\n      }\n      // A document is not new anymore.\n      doc._isNew = false;\n      return result;\n    }\n    // Catch stub exceptions.\n    catch (err) {\n      if (callback) {\n        callback(err);\n        return null;\n      }\n      throw err;\n    }\n  }\n\n  // If we can just insert a document without calling the meteor method. We may\n  // be on the server or the collection may be local.\n  try {\n    // Prepare arguments.\n    let methodArgs = {\n      doc,\n      stopOnFirstError,\n      simulation,\n      trusted: true\n    };\n    if (inserting) {\n      let result = documentInsert(methodArgs);\n      if (callback) {\n        callback(undefined, result);\n      }\n      return result;\n    }\n    else {\n      methodArgs.fields = fields;\n      let result = documentUpdate(methodArgs);\n      if (callback) {\n        callback(undefined, result);\n      }\n      return result;\n    }\n  }\n  catch (err) {\n    if (callback) {\n      callback(err);\n      return null;\n    }\n    throw err;\n  }\n}\n\nexport default save;","import _ from 'lodash';\nimport transformToClass from '../utils/transform_to_class.js';\nimport Event from '../../events/event.js';\nimport { Mongo } from 'meteor/mongo';\n\nfunction createMethod(methodName) {\n  return function(selector, options) {\n    let Class = this;\n    let Collection = Class.getCollection();\n\n    // Get selector from arguments.\n    if (arguments.length === 0) {\n      selector = {};\n    }\n    else {\n      selector = arguments[0];\n    }\n    // If selector is null then just proceed to collection's find method.\n    if (_.isNull(selector)) {\n      return Collection[methodName](selector, options);\n    }\n    // Rewrite selector to make it an object.\n    selector = Mongo.Collection._rewriteSelector(selector);\n\n    // Set default options.\n    options = _.defaults({}, options, {\n      defaults: true,\n      children: true\n    });\n    // We don't want to clone raw object in the \"find\" method.\n    options.clone = false;\n\n    // Modify selector and options using the \"beforeFind\" event handlers.\n    if (!options.disableEvents) {\n      Class.dispatchEvent(new Event('beforeFind', {\n        selector,\n        options\n      }));\n    }\n\n    // If it's an inherited class, then get only documents being instances of\n    // the subclass.\n    const typeField = Class.getTypeField();\n    if (typeField) {\n      // If a class has child classes then we have to fetch document being\n      // instances of the parent and child classes depending on a value of\n      // the \"children\" option.\n      const children = Class.getChildren();\n      if (options.children === true && children.length > 0) {\n        selector[typeField] = {\n          $in: _(children).map(function(Child) {\n            return Child.getName();\n          }).concat(Class.getName()).value()\n        };\n      }\n      else {\n        selector[typeField] = Class.getName();\n      }\n    }\n\n    // Get custom transform function from the class schema.\n    if (options.transform === undefined) {\n      options.transform = Class.getTransform(options);\n    }\n    // Get default transform function if none is provided.\n    if (options.transform === undefined) {\n      options.transform = transformToClass(Class.getName(), {\n        defaults: options.defaults\n      });\n    }\n\n    // Execute the original method.\n    let result = Collection[methodName](selector, options);\n\n    // Modify a query result using the \"afterFind\" event handlers.\n    if (!options.disableEvents) {\n      Class.dispatchEvent(new Event('afterFind', {\n        selector,\n        options,\n        result\n      }));\n    }\n\n    return result;\n  };\n}\n\nconst find = createMethod('find');\nconst findOne = createMethod('findOne');\n\nexport { find, findOne };\n","function getCollection() {\n\treturn this.schema.collection;\n};\n\nexport default getCollection;","import Class from '../../../core/class.js';\nimport setDefaults from '../../fields/utils/set_defaults.js';\n\nfunction getTransform(options) {\n  return this.schema.transform;\n};\n\nexport default getTransform;","function getTypeField() {\n\treturn this.schema.typeField;\n};\n\nexport default getTypeField;","import isRemote from '../utils/is_remote.js';\nimport callMeteorMethod from '../utils/call_meteor_method.js';\nimport classInsert from '../utils/class_insert.js';\n\nfunction insert(rawDoc, callback) {\n  const Class = this;\n  const Collection = Class.getCollection();\n\n  // Prepare arguments.\n  const args = {\n    className: Class.getName(),\n    rawDoc\n  };\n\n  // Generate ID if not provided.\n  if (!rawDoc._id) {\n    let generateId = true;\n    // Don't generate the id if we're the client and the 'outermost' call.\n    // This optimization saves us passing both the randomSeed and the id.\n    // Passing both is redundant.\n    if (Collection._isRemoteCollection()) {\n      const enclosing = DDP._CurrentInvocation.get();\n      if (!enclosing) {\n        generateId = false;\n      }\n    }\n    if (generateId) {\n      rawDoc._id = Collection._makeNewID();\n    }\n  }\n\n  // If we are dealing with a remote collection and we are not on the server.\n  if (isRemote(Class)) {\n    // Prepare meteor method name to be called.\n    const methodName = '/Astronomy/insert';\n\n    try {\n      // Run Meteor method.\n      return callMeteorMethod(\n        Class, methodName, [args], callback\n      );\n    }\n    // Catch stub exceptions.\n    catch (err) {\n      if (callback) {\n        callback(err);\n        return null;\n      }\n      throw err;\n    }\n  }\n\n  // If we can just insert a document without calling the meteor method. We may\n  // be on the server or the collection may be local.\n  try {\n    // Set the \"trusted\" argument to true.\n    args.trusted = true;\n    // Insert a document.\n    let result = classInsert(args);\n    if (callback) {\n      callback(undefined, result);\n    }\n    return result;\n  }\n  catch (err) {\n    if (callback) {\n      callback(err);\n      return null;\n    }\n    throw err;\n  }\n}\n\nexport default insert;","import _ from 'lodash';\n\nfunction isSecured(operation) {\n  if (_.has(this.schema.secured, operation)) {\n    return this.schema.secured[operation];\n  }\n  else {\n    let common = this.schema.secured.common;\n    return common !== undefined ? common : true;\n  }\n};\n\nexport default isSecured;","import isRemote from '../utils/is_remote.js';\nimport callMeteorMethod from '../utils/call_meteor_method.js';\nimport classRemove from '../utils/class_remove.js';\n\nfunction remove(selector, options, callback) {\n  const Class = this;\n\n  // If we omit options argument then it may be a callback function.\n  if (options instanceof Function) {\n    callback = options;\n    options = {};\n  }\n  // Make sure that options is at least an empty object.\n  options = options || {};\n  // Prepare arguments.\n  const args = {\n    className: Class.getName(),\n    selector,\n    options\n  };\n\n  // If we are dealing with a remote collection and we are not on the server.\n  if (isRemote(Class)) {\n    // Prepare meteor method name to be called.\n    const methodName = '/Astronomy/remove';\n\n    try {\n      // Run Meteor method.\n      return callMeteorMethod(\n        Class, methodName, [args], callback\n      );\n    }\n    // Catch stub exceptions.\n    catch (err) {\n      if (callback) {\n        callback(err);\n        return null;\n      }\n      throw err;\n    }\n  }\n\n  // If we can just remove a document without calling the meteor method. We may\n  // be on the server or the collection may be local.\n  try {\n    // Set the \"trusted\" argument to true.\n    args.trusted = true;\n    // Remove a document.\n    let result = classRemove(args);\n    if (callback) {\n      callback(undefined, result);\n    }\n    return result;\n  }\n  catch (err) {\n    if (callback) {\n      callback(err);\n      return null;\n    }\n    throw err;\n  }\n}\n\nexport default remove;","import isRemote from '../utils/is_remote.js';\nimport callMeteorMethod from '../utils/call_meteor_method.js';\nimport classUpdate from '../utils/class_update.js';\n\nfunction update(selector, modifier, options, callback) {\n  const Class = this;\n\n  // If we omit options argument then it may be a callback function.\n  if (options instanceof Function) {\n    callback = options;\n    options = {};\n  }\n  // Make sure that options is at least an empty object.\n  options = options || {};\n  // Prepare arguments.\n  const args = {\n    className: Class.getName(),\n    selector,\n    modifier,\n    options\n  };\n\n  // If we are dealing with a remote collection and we are not on the server.\n  if (isRemote(Class)) {\n    // Prepare meteor method name to be called.\n    const methodName = '/Astronomy/update';\n\n    try {\n      // Run Meteor method.\n      return callMeteorMethod(\n        Class, methodName, [args], callback\n      );\n    }\n    // Catch stub exceptions.\n    catch (err) {\n      if (callback) {\n        callback(err);\n        return null;\n      }\n      throw err;\n    }\n  }\n\n  // If we can just remove a document without calling the meteor method. We may\n  // be on the server or the collection may be local.\n  try {\n    // Set the \"trusted\" argument to true.\n    args.trusted = true;\n    // Remove a document.\n    let result = classUpdate(args);\n    if (callback) {\n      callback(undefined, result);\n    }\n    return result;\n  }\n  catch (err) {\n    if (callback) {\n      callback(err);\n      return null;\n    }\n    throw err;\n  }\n}\n\nexport default update;","import isRemote from '../utils/is_remote.js';\nimport callMeteorMethod from '../utils/call_meteor_method.js';\nimport classUpsert from '../utils/class_upsert.js';\n\nfunction upsert(selector, modifier, options, callback) {\n  const Class = this;\n\n  // If we omit options argument then it may be a callback function.\n  if (options instanceof Function) {\n    callback = options;\n    options = {};\n  }\n  // Make sure that options is at least an empty object.\n  options = options || {};\n  // Prepare arguments.\n  const args = {\n    className: Class.getName(),\n    selector,\n    modifier,\n    options\n  };\n\n  // If we are dealing with a remote collection and we are not on the server.\n  if (isRemote(Class)) {\n    // Prepare meteor method name to be called.\n    const methodName = '/Astronomy/upsert';\n\n    try {\n      // Run Meteor method.\n      return callMeteorMethod(\n        Class, methodName, [args], callback\n      );\n    }\n    // Catch stub exceptions.\n    catch (err) {\n      if (callback) {\n        callback(err);\n        return null;\n      }\n      throw err;\n    }\n  }\n\n  // If we can just remove a document without calling the meteor method. We may\n  // be on the server or the collection may be local.\n  try {\n    // Set the \"trusted\" argument to true.\n    args.trusted = true;\n    // Remove a document.\n    let result = classUpsert(args);\n    if (callback) {\n      callback(undefined, result);\n    }\n    return result;\n  }\n  catch (err) {\n    if (callback) {\n      callback(err);\n      return null;\n    }\n    throw err;\n  }\n}\n\nexport default upsert;","import _ from 'lodash';\n// Utils.\nimport resolveValues from '../../fields/utils/resolve_values.js';\nimport hasMeteorMethod from '../utils/has_meteor_method.js';\n// Class static methods.\nimport { find, findOne } from '../class_static_methods/find.js';\nimport insert from '../class_static_methods/insert.js';\nimport update from '../class_static_methods/update.js';\nimport upsert from '../class_static_methods/upsert.js';\nimport remove from '../class_static_methods/remove.js';\n// Class prototype methods.\nimport protoSave from '../class_prototype_methods/save.js';\nimport protoRemove from '../class_prototype_methods/remove.js';\nimport protoReload from '../class_prototype_methods/reload.js';\nimport protoCopy from '../class_prototype_methods/copy.js';\nimport protoGetModifier from '../class_prototype_methods/get_modifier.js';\nimport protoGetModified from '../class_prototype_methods/get_modified.js';\nimport protoGetModifiedValues from '../class_prototype_methods/get_modified_values.js';\nimport protoIsModified from '../class_prototype_methods/is_modified.js';\n// Meteor methods.\nimport meteorInsert from '../meteor_methods/insert.js';\nimport meteorUpdate from '../meteor_methods/update.js';\nimport meteorUpsert from '../meteor_methods/upsert.js';\nimport meteorRemove from '../meteor_methods/remove.js';\n// Class events.\nimport beforeInit from '../class_events/before_init.js';\nimport afterInit from '../class_events/after_init.js';\nimport fromJSONValue from '../class_events/from_json_value.js';\nimport toJSONValue from '../class_events/to_json_value.js';\n\nfunction onApplyDefinition(Class, parsedDefinition, className) {\n  const schema = Class.schema;\n\n  if (parsedDefinition.collection) {\n    const Collection = schema.collection = parsedDefinition.collection;\n    const id = Collection._makeNewID();\n\n    Class.extend({\n      // Add the \"_id\" field.\n      fields: {\n        _id: {\n          name: '_id',\n          type: id.constructor,\n          optional: true\n        }\n      },\n      // Add storage events.\n      events: {\n        beforeInit: [beforeInit],\n        toJSONValue: [toJSONValue],\n        fromJSONValue: [fromJSONValue]\n      }\n    }, ['fields', 'events']);\n\n    // If it's a remote collection then we register methods on the connection\n    // object of the collection.\n    const connection = Collection._connection;\n    if (connection) {\n      // Prepare meteor methods to be added.\n      const meteorMethods = {\n        '/Astronomy/insert': meteorInsert,\n        '/Astronomy/update': meteorUpdate,\n        '/Astronomy/upsert': meteorUpsert,\n        '/Astronomy/remove': meteorRemove,\n      };\n      _.each(meteorMethods, (meteorMethod, methodName) => {\n        if (!hasMeteorMethod(connection, methodName)) {\n          // Add meteor method.\n          connection.methods(_.zipObject([methodName], [meteorMethod]));\n        }\n      });\n    }\n\n    // Class static methods.\n    Class.find = find;\n    Class.findOne = findOne;\n    Class.insert = insert;\n    Class.update = update;\n    Class.upsert = upsert;\n    Class.remove = remove;\n    // Class prototype methods.\n    Class.prototype.save = protoSave;\n    Class.prototype.remove = protoRemove;\n    Class.prototype.reload = protoReload;\n    Class.prototype.copy = protoCopy;\n    Class.prototype.getModifier = protoGetModifier;\n    Class.prototype.getModified = protoGetModified;\n    Class.prototype.getModifiedValues = protoGetModifiedValues;\n    Class.prototype.isModified = protoIsModified;\n  }\n\n  // Apply type field.\n  if (parsedDefinition.typeField) {\n    const typeField = schema.typeField = parsedDefinition.typeField;\n    Class.extend({\n      // Add the type field.\n      fields: {\n        [typeField]: {\n          type: String\n        }\n      },\n      events: {\n        afterInit: [afterInit]\n      }\n    }, ['fields', 'events']);\n\n    if (parsedDefinition.typeField) {\n      schema.typeField = parsedDefinition.typeField;\n    }\n  }\n\n  // If class has already assigned collection.\n  const Collection = Class.getCollection();\n  if (Collection) {\n    // Apply custom transformation function if the transform property is a\n    // function.\n    if (_.isFunction(parsedDefinition.transform)) {\n      schema.transform = function(rawDoc) {\n        const resolvedDoc = resolveValues({\n          Class,\n          values: rawDoc\n        });\n        return parsedDefinition.transform(resolvedDoc);\n      };\n    }\n    else if (parsedDefinition.transform === null) {\n      schema.transform = null;\n    }\n\n    if (parsedDefinition.secured !== undefined) {\n      _.extend(schema.secured, parsedDefinition.secured);\n    }\n  }\n};\n\nexport default onApplyDefinition;","// Class static methods.\nimport getCollection from '../class_static_methods/get_collection.js';\nimport getTypeField from '../class_static_methods/get_type_field.js';\nimport getTransform from '../class_static_methods/get_transform.js';\nimport isSecured from '../class_static_methods/is_secured.js';\n\nfunction onInitClass(Class, className) {\n  // Class static methods.\n  Class.getCollection = getCollection;\n  Class.getTypeField = getTypeField;\n  Class.getTransform = getTransform;\n  Class.isSecured = isSecured;\n};\n\nexport default onInitClass;","function onInitDefinition(definition, className) {\n  definition.collection = undefined;\n  definition.typeField = undefined;\n  definition.transform = undefined;\n  definition.secured = undefined;\n};\n\nexport default onInitDefinition;","function onInitSchema(schema, className) {\n  schema.collection = undefined;\n  schema.typeField = undefined;\n  schema.transform = undefined;\n  schema.secured = {\n    common: true\n  };\n};\n\nexport default onInitSchema;","import _ from 'lodash';\n\nfunction onMergeDefinitions(targetDefinition, sourceDefinition, ClassName) {\n  if (sourceDefinition.collection) {\n    targetDefinition.collection = sourceDefinition.collection;\n  }\n  if (sourceDefinition.typeField) {\n    targetDefinition.typeField = sourceDefinition.typeField;\n  }\n  if (sourceDefinition.transform !== undefined) {\n    targetDefinition.transform = sourceDefinition.transform;\n  }\n  if (sourceDefinition.secured !== undefined) {\n    targetDefinition.secured = _.extend(\n      {},\n      targetDefinition.secured,\n      sourceDefinition.secured\n    );\n  }\n};\n\nexport default onMergeDefinitions;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\n\nfunction onParseDefinition(parsedDefinition, definition, className) {\n  // Check existence and validity of the \"collection\" property.\n  if (definition.collection !== undefined) {\n    // The \"collection\" property has to be an instance of the\n    // \"Mongo.Collection\".\n    if (!(definition.collection instanceof Mongo.Collection)) {\n      throwParseError([{\n          'class': className\n        }, {\n          'property': 'collection'\n        },\n        'Property value has to be an instance of \"Mongo.Collection\"'\n      ]);\n    }\n    parsedDefinition.collection = definition.collection;\n  }\n\n  // Check existence and validity of the \"typeField\" property.\n  if (definition.typeField !== undefined) {\n    // The \"typeField\" property has to be a string.\n    if (!Match.test(definition.typeField, String)) {\n      throwParseError([{\n          'class': className\n        }, {\n          'property': 'typeField'\n        },\n        'Property value has to be a string'\n      ]);\n    }\n    parsedDefinition.typeField = definition.typeField;\n  }\n\n  // Check existence and validity of the \"transform\" property.\n  if (definition.transform !== undefined) {\n    // The \"transform\" property has to be a function.\n    if (!Match.test(definition.transform, Match.OneOf(Function, null))) {\n      throwParseError([{\n          'class': className\n        }, {\n          'property': 'transform'\n        },\n        'Property value has to be a function or null'\n      ]);\n    }\n    parsedDefinition.transform = definition.transform;\n  }\n\n  // Check existence and validity of the \"secured\" property.\n  if (definition.secured !== undefined) {\n    if (!Match.test(definition.secured, Match.OneOf(Boolean, Object))) {\n      throwParseError([{\n          'class': className\n        }, {\n          'property': 'secured'\n        },\n        'Property value has to be a boolean or an object with keys being ' +\n        'method name and values being boolean'\n      ]);\n    }\n    if (_.isBoolean(definition.secured)) {\n      parsedDefinition.secured = {\n        common: definition.secured\n      };\n    }\n    else {\n      parsedDefinition.secured = definition.secured;\n    }\n  }\n};\n\nexport default onParseDefinition;","import classInsert from '../utils/class_insert.js';\n\nfunction insert(args) {\n  return classInsert(args);\n};\n\nexport default insert;","import classRemove from '../utils/class_remove.js';\n\nfunction remove(args) {\n  return classRemove(args);\n};\n\nexport default remove;","import classUpdate from '../utils/class_update.js';\n\nfunction update(args) {\n  return classUpdate(args);\n};\n\nexport default update;","import classUpsert from '../utils/class_upsert.js';\n\nfunction upsert(args) {\n  return classUpsert(args);\n};\n\nexport default upsert;","import { DDP } from 'meteor/ddp';\n\nfunction alreadyInSimulation() {\n  const enclosing = DDP._CurrentInvocation.get();\n  return enclosing && enclosing.isSimulation;\n}\n\nexport default alreadyInSimulation;","import _ from 'lodash';\nimport castNested from '../../fields/utils/cast_nested.js';\nimport setAll from '../../fields/utils/set_all.js';\nimport { LocalCollection } from 'meteor/minimongo';\n\nfunction applyModifier({\n  doc,\n  modifier,\n  options\n}) {\n  // Apply modifier only if provided.\n  if (modifier && _.size(modifier) > 0) {\n    // Get raw object because the \"_modify\" method can only work with plain\n    // objects.\n    const rawDoc = doc.raw();\n    // Use Minimongo's the \"_modify\" method to apply modifier.\n    LocalCollection._modify(rawDoc, modifier, options);\n    // Set all values back again on a document.\n    setAll(doc, rawDoc);\n  }\n};\n\nexport default applyModifier;","function callMeteorMethod(\n  Class, methodName, methodArgs, callback\n) {\n  const Collection = Class.getCollection();\n  let connection = Collection && Collection._connection;\n  if (!connection && (!Collection || !Collection._name)) {\n    connection = Meteor.connection;\n  }\n\n  // Prepare meteor method options.\n  const methodOptions = {\n    throwStubExceptions: true,\n    returnStubValue: true\n  };\n\n  return connection.apply(\n    methodName, methodArgs, methodOptions, callback\n  );\n}\n\nexport default callMeteorMethod;","import AstroClass from '../../../core/class.js';\nimport documentInsert from './document_insert.js';\n\nfunction classInsert(args = {}) {\n  const {\n    className,\n    rawDoc,\n    stopOnFirstError,\n    fields,\n    simulation = true,\n    trusted = false,\n  } = args;\n\n  // Stop execution, if we are not on the server, when the \"simulation\" flag is\n  // not set.\n  if (!simulation && !Meteor.isServer) {\n    return;\n  }\n\n  const Class = AstroClass.get(className);\n  // Create a new document.\n  const doc = new Class(rawDoc);\n\n  // Insert a document.\n  return documentInsert({\n    doc,\n    stopOnFirstError,\n    simulation,\n    trusted,\n  });\n};\n\nexport default classInsert;","import AstroClass from '../../../core/class.js';\nimport alreadyInSimulation from './already_in_simulation.js';\nimport throwIfSelectorIsNotId from './throw_if_selector_is_not_id.js';\nimport documentRemove from './document_remove.js';\n\nfunction classRemove(args = {}) {\n  const {\n    className,\n    selector,\n    options,\n    simulation = true,\n    trusted = false\n  } = args;\n\n  // Stop execution, if we are not on the server, when the \"simulation\" flag is\n  // not set.\n  if (!simulation && !Meteor.isServer) {\n    return;\n  }\n\n  // Throw exception if we are trying to perform an operation on more than one\n  // document at once and it's not trusted call.\n  if (!trusted && !alreadyInSimulation()) {\n    throwIfSelectorIsNotId(selector, 'remove');\n  }\n\n  const Class = AstroClass.get(className);\n  // Get all documents matching selector.\n  const docs = Class.find(selector, options);\n  // Prepare result of the method execution.\n  let result = 0;\n\n  docs.forEach((doc) => {\n    // Update a document.\n    result += documentRemove({\n      doc,\n      simulation,\n      trusted\n    });\n  });\n\n  return result;\n};\n\nexport default classRemove;","import _ from 'lodash';\nimport AstroClass from '../../../core/class.js';\nimport alreadyInSimulation from './already_in_simulation.js';\nimport throwIfSelectorIsNotId from './throw_if_selector_is_not_id.js';\nimport documentUpdate from './document_update.js';\nimport applyModifier from './apply_modifier.js';\nimport { Minimongo } from 'meteor/minimongo';\n\nfunction classUpdate(args = {}) {\n  const {\n    className,\n    selector,\n    modifier,\n    options,\n    stopOnFirstError,\n    fields,\n    simulation = true,\n    trusted = false,\n  } = args;\n\n  // Stop execution, if we are not on the server, when the \"simulation\" flag is\n  // not set.\n  if (!simulation && !Meteor.isServer) {\n    return;\n  }\n\n  // Throw exception if we are trying to perform an operation on more than one\n  // document at once and it's not trusted call.\n  if (!trusted && !alreadyInSimulation()) {\n    throwIfSelectorIsNotId(selector, 'update');\n  }\n\n  const Class = AstroClass.get(className);\n  // Get all documents matching selector.\n  let docs;\n  if (options.multi) {\n    docs = Class.find(selector, options);\n  }\n  else {\n    docs = Class.find(selector, _.extend(options, {\n      limit: 1\n    }));\n  }\n\n  // Create a minimongo matcher object to find array indexes on the projection\n  // operator use.\n  const matcher = new Minimongo.Matcher(selector);\n\n  // Prepare result of the method execution.\n  let result = 0;\n\n  docs.forEach((doc) => {\n    // Use matcher to find array indexes in a given document that needs updating\n    // on the projection operator use.\n    let queryResult = matcher.documentMatches(doc);\n\n    // Apply modifier.\n    applyModifier({\n      doc,\n      modifier,\n      options: queryResult.arrayIndices ? {\n        arrayIndices: queryResult.arrayIndices\n      } : {}\n    });\n\n    // Update a document.\n    result += documentUpdate({\n      doc,\n      stopOnFirstError,\n      simulation,\n      fields,\n      trusted\n    });\n  });\n\n  return result;\n};\n\nexport default classUpdate;","import AstroClass from '../../../core/class.js';\nimport alreadyInSimulation from './already_in_simulation.js';\nimport throwIfSelectorIsNotId from './throw_if_selector_is_not_id.js';\nimport documentInsert from './document_insert.js';\nimport documentUpdate from './document_update.js';\nimport applyModifier from './apply_modifier.js';\nimport { Minimongo, LocalCollection } from 'meteor/minimongo';\n\nfunction classUpsert(args = {}) {\n  const {\n    className,\n    selector,\n    modifier,\n    options,\n    stopOnFirstError,\n    fields,\n    simulation = true,\n    trusted = false,\n  } = args;\n\n  // Stop execution, if we are not on the server, when the \"simulation\" flag is\n  // not set.\n  if (!simulation && !Meteor.isServer) {\n    return;\n  }\n\n  // Throw exception if we are trying to perform an operation on more than one\n  // document at once and it's not trusted call.\n  if (!trusted && !alreadyInSimulation()) {\n    throwIfSelectorIsNotId(selector, 'upsert');\n  }\n\n  const Class = AstroClass.get(className);\n  // Get all documents matching selector.\n  let docs;\n  if (options.multi) {\n    docs = Class.find(selector, options);\n  }\n  else {\n    docs = Class.find(selector, _.extend(options, {\n      limit: 1\n    }));\n  }\n\n  // Create a minimongo matcher object to find array indexes on the projection\n  // operator use.\n  const matcher = new Minimongo.Matcher(selector);\n\n  // Prepare result of the method execution.\n  const result = {\n    numberAffected: 0,\n    insertedId: null\n  };\n\n  if (docs.count() > 0) {\n    docs.forEach((doc) => {\n      // Use matcher to find array indexes in a given document that needs updating\n      // on the projection operator use.\n      let queryResult = matcher.documentMatches(doc);\n\n      // Apply modifier.\n      applyModifier({\n        doc,\n        modifier,\n        options: queryResult.arrayIndices ? {\n          arrayIndices: queryResult.arrayIndices\n        } : {}\n      });\n\n      // Update a document.\n      result.numberAffected += documentUpdate({\n        doc,\n        stopOnFirstError,\n        simulation,\n        fields,\n        trusted\n      });\n    });\n  }\n  else {\n    // Create a new document from selector.\n    const doc = new Class(LocalCollection._removeDollarOperators(selector));\n    // Apply modifier for the insert operation.\n    applyModifier({\n      doc,\n      modifier,\n      options: {\n        isInsert: true\n      }\n    });\n\n    // Insert a document.\n    result.insertedId = documentInsert({\n      doc,\n      stopOnFirstError,\n      simulation,\n      trusted,\n    });\n  }\n\n  return result;\n};\n\nexport default classUpsert;","import _ from 'lodash';\nimport castNested from '../../fields/utils/cast_nested.js';\nimport rawAll from '../../fields/utils/raw_all.js';\nimport triggerBeforeSave from './trigger_before_save.js';\nimport triggerBeforeInsert from './trigger_before_insert.js';\nimport triggerAfterSave from './trigger_after_save.js';\nimport triggerAfterInsert from './trigger_after_insert.js';\nimport documentValidate from '../../validators/utils/document_validate.js';\n\nfunction documentInsert(args = {}) {\n  const {\n    doc,\n    stopOnFirstError,\n    fields,\n    simulation = true,\n    trusted = false\n  } = args;\n\n  // Stop execution, if we are not on the server, when the \"simulation\" flag is\n  // not set.\n  if (!simulation && !Meteor.isServer) {\n    return;\n  }\n\n  const Class = doc.constructor;\n  const Collection = Class.getCollection();\n\n  // Generate ID if not provided.\n  if (!doc._id) {\n    doc._id = Collection._makeNewID();\n  }\n\n  // Check if a class is secured.\n  if (Class.isSecured('insert') && Meteor.isServer && !trusted) {\n    throw new Meteor.Error(403, 'Inserting from the client is not allowed');\n  }\n\n  // Cast nested documents.\n  castNested({\n    doc\n  });\n\n  // Trigger before events.\n  triggerBeforeSave(doc, trusted);\n  triggerBeforeInsert(doc, trusted);\n\n  // Cast nested documents.\n  castNested({\n    doc\n  });\n\n  // Validate a document.\n  documentValidate({\n    doc,\n    fields,\n    stopOnFirstError,\n    simulation\n  });\n\n  // Get plain values of all fields. Pick only values that we want to save.\n  let values = rawAll(doc, {\n    transient: false\n  });\n  values = _.omitBy(values, _.isUndefined);\n\n  // Insert a document.\n  try {\n    // There is a difference in what the insert method returns depending on the\n    // environment. On the client it returns an inserted document id, on the\n    // server it returns array of inserted documents. So we always return the\n    // generated id. We can't send an entire document because it could be a\n    // security issue if we are not subscribed to all fields of a document.\n    Collection._collection.insert(values);\n\n    // Change the \"_isNew\" flag to \"false\". Now a document is not new.\n    doc._isNew = false;\n\n    // Trigger after events.\n    triggerAfterInsert(doc, trusted);\n    triggerAfterSave(doc, trusted);\n\n    return doc._id;\n  }\n  catch(err) {\n    if (err.name === 'MongoError' || err.name === 'MinimongoError') {\n      throw new Meteor.Error(409, err.toString());\n    }\n    else {\n      throw err;\n    }\n  }\n};\n\nexport default documentInsert;\n","import triggerBeforeRemove from './trigger_before_remove.js';\nimport triggerAfterRemove from './trigger_after_remove.js';\n\nfunction documentRemove(args = {}) {\n  const {\n    doc,\n    simulation = true,\n    trusted = false\n  } = args;\n\n  // Stop execution, if we are not on the server, when the \"simulation\" flag is\n  // not set.\n  if (!simulation && !Meteor.isServer) {\n    return;\n  }\n\n  const Class = doc.constructor;\n  const Collection = Class.getCollection();\n\n  // Remove only when document has the \"_id\" field (it's persisted).\n  if (doc._isNew || !doc._id) {\n    return 0;\n  }\n\n  // Check if a class is secured.\n  if (Class.isSecured('remove') && Meteor.isServer && !trusted) {\n    throw new Meteor.Error(403, 'Removing from the client is not allowed');\n  }\n\n  // Trigger before events.\n  triggerBeforeRemove(doc, trusted);\n\n  // Remove a document.\n  try {\n    const result = Collection._collection.remove({\n      _id: doc._id\n    });\n\n    // Mark a document as new, so it will be possible to save it again.\n    doc._isNew = true;\n\n    // Trigger after events.\n    triggerAfterRemove(doc, trusted);\n\n    return result;\n  }\n  catch(err) {\n    if (err.name === 'MongoError' || err.name === 'MinimongoError') {\n      throw new Meteor.Error(409, err.toString());\n    }\n    else {\n      throw err;\n    }\n  }\n};\n\nexport default documentRemove;","import _ from 'lodash';\nimport castNested from '../../fields/utils/cast_nested.js';\nimport triggerBeforeSave from './trigger_before_save.js';\nimport triggerBeforeUpdate from './trigger_before_update.js';\nimport triggerAfterSave from './trigger_after_save.js';\nimport triggerAfterUpdate from './trigger_after_update.js';\nimport isModified from './is_modified.js';\nimport getModifier from './get_modifier.js';\nimport documentValidate from '../../validators/utils/document_validate.js';\n\nfunction documentUpdate(args = {}) {\n  let {\n    doc,\n    stopOnFirstError,\n    fields,\n    simulation = true,\n    trusted = false,\n  } = args;\n\n  // Stop execution, if we are not on the server, when the \"simulation\" flag is\n  // not set.\n  if (!simulation && !Meteor.isServer) {\n    return;\n  }\n\n  let Class = doc.constructor;\n  let Collection = Class.getCollection();\n\n  // Return if there were no modifications.\n  if (!isModified({\n      doc,\n      fields\n    })) {\n    // Validate a document even if there were no modifications.\n    documentValidate({\n      doc,\n      fields,\n      stopOnFirstError,\n      simulation\n    });\n    // 0 documents were modified.\n    return 0;\n  }\n\n  // Check if a class is secured.\n  if (Class.isSecured('update') && Meteor.isServer && !trusted) {\n    throw new Meteor.Error(403, 'Updating from the client is not allowed');\n  }\n\n  // Cast nested documents.\n  castNested({\n    doc\n  });\n\n  // Trigger before events.\n  triggerBeforeSave(doc, trusted);\n  triggerBeforeUpdate(doc, trusted);\n\n  // Cast nested documents.\n  castNested({\n    doc\n  });\n\n  // Validate a document.\n  documentValidate({\n    doc,\n    fields,\n    stopOnFirstError,\n    simulation\n  });\n\n  // Get modifier.\n  const modifier = getModifier({\n    doc,\n    fields\n  });\n  // Stop execution is a modifier is empty.\n  if (_.size(modifier) === 0) {\n    return 0;\n  }\n  // Update a document.\n  try {\n    const result = Collection._collection.update({\n      _id: doc._id\n    }, modifier);\n\n    // Trigger after events.\n    triggerAfterUpdate(doc, trusted);\n    triggerAfterSave(doc, trusted);\n\n    return result;\n  }\n  catch(err) {\n    if (err.name === 'MongoError' || err.name === 'MinimongoError') {\n      throw new Meteor.Error(409, err.toString());\n    }\n    else {\n      throw err;\n    }\n  }\n};\n\nexport default documentUpdate;\n","import _ from 'lodash';\nimport AstroClass from '../../../core/class.js';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport rawMany from '../../fields/utils/raw_many.js';\nimport omitUndefined from './omit_undefined.js';\n\nfunction diff({\n  newDoc,\n  oldDoc,\n  prefix = ''\n}) {\n  let result = [];\n\n  const fieldsNames = _.union(_.keys(oldDoc), _.keys(newDoc));\n  _.each(fieldsNames, function(fieldName) {\n    const oldValue = oldDoc[fieldName];\n    const newValue = newDoc[fieldName];\n\n    if (!EJSON.equals(oldValue, newValue)) {\n      const nestedPrefix = (prefix && prefix + '.') + fieldName;\n      result.push(nestedPrefix);\n\n      // Compare two objects.\n      if (_.isPlainObject(oldValue) && _.isPlainObject(newValue)) {\n\n        result.push(...diff({\n          oldDoc: oldValue,\n          newDoc: newValue,\n          prefix: nestedPrefix\n        }));\n\n      }\n      // Compare two arrays.\n      else if (_.isArray(oldValue) && _.isArray(newValue)) {\n\n        let maxLength = Math.max(oldValue.length, newValue.length);\n        _.each(_.range(maxLength), function(index) {\n          const arrayPrefix = nestedPrefix + '.' + index;\n          const oldElement = oldValue[index];\n          const newElement = newValue[index];\n          if (!EJSON.equals(oldElement, newElement)) {\n            result.push(arrayPrefix);\n            // If both array elements are object, then we perform diff between\n            // them.\n            if (_.isPlainObject(oldElement) && _.isPlainObject(newElement)) {\n              // Get a difference between elements.\n              result.push(...diff({\n                oldDoc: oldElement,\n                newDoc: newElement,\n                prefix: arrayPrefix\n              }));\n            }\n          }\n        });\n\n      }\n    }\n  });\n\n  return result;\n}\n\nfunction getModified(options = {}) {\n  let {\n    doc: newDoc,\n    transient = false,\n    immutable = false,\n    fields\n  } = options;\n\n  const Class = newDoc.constructor;\n  const opts = {\n    defaults: false\n  };\n  const oldDoc = newDoc._isNew ?\n    new Class({}, opts) : Class.findOne(newDoc._id, opts);\n  // If there is no document before modifications that may mean that we are not\n  // subscribed to the publication publishing given document or we modified the\n  // _id of a document.\n  if (!oldDoc) {\n    throwParseError([{\n        'module': 'storage'\n      }, {\n        'utility': 'getModified'\n      },\n      `Can not get a document before modifications. You are not subscribed ` +\n      `to the publication publishing a \"${Class.getName()}\" document with ` +\n      `the id \"${newDoc._id}\" or you have modified the \"_id\" field`\n    ]);\n  }\n\n  // If there are not fields specified, then get all of them.\n  if (!fields) {\n    fields = Class.getFieldsNames();\n  }\n\n  return diff({\n    // Get raw data from the docs.\n    oldDoc: omitUndefined(rawMany(oldDoc, fields, {\n      transient,\n      immutable\n    })),\n    newDoc: omitUndefined(rawMany(newDoc, fields, {\n      transient,\n      immutable\n    }))\n  });\n};\n\nexport default getModified;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport rawMany from '../../fields/utils/raw_many.js';\nimport omitUndefined from './omit_undefined.js';\n\nfunction diff({\n  oldDoc,\n  newDoc,\n  prefix = ''\n}) {\n  let $set = {};\n  let $unset = {};\n  let $push = {};\n\n  const fieldsNames = _.union(_.keys(oldDoc), _.keys(newDoc));\n  _.each(fieldsNames, function(fieldName) {\n    const oldValue = oldDoc[fieldName];\n    const newValue = newDoc[fieldName];\n\n    if (!EJSON.equals(oldValue, newValue)) {\n      const nestedPrefix = (prefix && prefix + '.') + fieldName;\n\n      // Compare two objects.\n      if (_.isPlainObject(oldValue) && _.isPlainObject(newValue)) {\n\n        let {\n          $set: $nestedSet,\n          $unset: $nestedUnset,\n          $push: $nestedPush\n        } = diff({\n          oldDoc: oldValue,\n          newDoc: newValue,\n          prefix: nestedPrefix\n        });\n        _.extend($set, $nestedSet);\n        _.extend($unset, $nestedUnset);\n        _.extend($push, $nestedPush);\n\n      }\n      // Compare two arrays.\n      else if (_.isArray(oldValue) && _.isArray(newValue)) {\n\n        // NOTE: We need check a new array size. If its length increased or\n        // stayed the same then all changes can be registered using the $set\n        // modifier. If an array length decreased, then we should slice it.\n        // However it may not be possible if some element has also changed.\n        // In such situation we have to override entire array.\n        let $arraySet = {};\n        let $arrayUnset = {};\n        let $arrayPush = {};\n        // Compare up to number of elements in the array after the change.\n        _.each(newValue, function(newElement, index) {\n          const arrayPrefix = nestedPrefix + '.' + index;\n          const oldElement = oldValue[index];\n          if (!EJSON.equals(oldElement, newElement)) {\n            // If both array elements are object, then we perform diff between\n            // them.\n            if (_.isPlainObject(oldElement) && _.isPlainObject(newElement)) {\n              // Get a difference between elements.\n              let {\n                $set: $elementSet,\n                $unset: $elementUnset,\n                $push: $elementPush\n              } = diff({\n                oldDoc: oldElement,\n                newDoc: newElement,\n                prefix: arrayPrefix\n              });\n              _.extend($arraySet, $elementSet);\n              _.extend($arrayUnset, $elementUnset);\n              _.extend($arrayPush, $elementPush);\n            }\n            else {\n              $arraySet[arrayPrefix] = newElement;\n            }\n          }\n        });\n\n        // If an array was empty, then we override entire field with a new\n        // array. That way we solve a problem with treating array indexes as\n        // object keys, which cause inserting Object instead of Array into the\n        // Mongo collection.\n        if (oldValue.length === 0 && newValue.length > 0) {\n          $set[nestedPrefix] = newValue;\n        }\n        // Array length increased or stayed the same.\n        else if (newValue.length >= oldValue.length) {\n          _.extend($set, $arraySet);\n          _.extend($unset, $arrayUnset);\n          _.extend($push, $arrayPush);\n        }\n        // Array length decreased.\n        else {\n          // At least one array element has changed.\n          // FIXME: Due to an error in MiniMongo it's not possible to apply\n          // $push modifier with the $slice operator set to positive number.\n          // That's why the following \"if\" statement is always true and we\n          // have to override entire array when it was shrinked.\n          if (true || _.size($arraySet) > 0 || _.size($arrayPush) > 0) {\n            // So, we need to override entire array with its new state.\n            $set[nestedPrefix] = newValue;\n          }\n          // Array elements have not changed. The array length just shrinked.\n          else {\n            $push[nestedPrefix] = {\n              // We do not want to add any elements, we just want to slice an\n              // array.\n              $each: [],\n              // Slice array to new array length.\n              $slice: newValue.length\n            };\n          }\n        }\n\n      }\n      else {\n\n        if (newValue !== undefined) {\n          $set[nestedPrefix] = newValue;\n        }\n        else {\n          $unset[nestedPrefix] = '';\n        }\n      }\n    }\n  });\n\n  // Return only non empty modifiers.\n  let modifier = {};\n  if (_.size($set)) {\n    modifier.$set = $set;\n  }\n  if (_.size($unset)) {\n    modifier.$unset = $unset;\n  }\n  if (_.size($push)) {\n    modifier.$push = $push;\n  }\n  return modifier;\n};\n\nfunction getModifier(options) {\n  let {\n    doc: newDoc,\n    transient = false,\n    immutable = false,\n    fields\n  } = options;\n\n  const Class = newDoc.constructor;\n  const opts = {\n    defaults: false\n  };\n  const oldDoc = newDoc._isNew ?\n    new Class({}, opts) : Class.findOne(newDoc._id, opts);\n  // If there is no document before modifications that may mean that we are not\n  // subscribed to the publication publishing given document or we modified the\n  // _id of a document.\n  if (!oldDoc) {\n    throwParseError([{\n        'module': 'storage'\n      }, {\n        'utility': 'getModified'\n      },\n      `Can not get a document before modifications. You are not subscribed ` +\n      `to the publication publishing a \"${Class.getName()}\" document with ` +\n      `the id \"${newDoc._id}\" or you have modified the \"_id\" field`\n    ]);\n  }\n\n  // If there are not fields specified, then get all of them.\n  if (!fields) {\n    fields = Class.getFieldsNames();\n  }\n\n  return diff({\n    // Get raw data from the docs.\n    oldDoc: omitUndefined(rawMany(oldDoc, fields, {\n      transient,\n      immutable\n    })),\n    newDoc: omitUndefined(rawMany(newDoc, fields, {\n      transient,\n      immutable\n    }))\n  });\n};\n\nexport default getModifier;","import _ from 'lodash';\n\nfunction hasMeteorMethod(connection, methodName) {\n  // There is inconsistency between client and server. On the client connection\n  // object contains the \"_methodHandlers\" property and on the server the\n  // \"method_handlers\" property.\n  let methodHandlers = connection._methodHandlers || connection.method_handlers;\n\n  return _.has(methodHandlers, methodName);\n};\n\nexport default hasMeteorMethod;","import _ from 'lodash';\nimport getModified from './get_modified.js';\n\nfunction isModified(options = {}) {\n\tlet {\n\t\tdoc,\n\t\tpattern,\n\t\ttransient = false,\n\t\timmutable = false\n\t} = options;\n\n\tlet modified = getModified({\n\t\tdoc,\n\t\ttransient,\n\t\timmutable\n\t});\n\n\tif (pattern) {\n\t\treturn _.includes(modified, pattern);\n\t}\n\telse {\n\t\treturn modified.length > 0;\n\t}\n};\n\nexport default isModified;","function isRemote(Class) {\n  const Collection = Class.getCollection();\n  if (!Collection) {\n    return false;\n  }\n  const connection = Collection._connection;\n\n  return connection && connection !== Meteor.server;\n}\n\nexport default isRemote;","import _ from 'lodash';\n\nfunction omitUndefined(obj) {\n  return _.transform(obj, function(result, value, key) {\n    if (_.isPlainObject(value)) {\n      result[key] = omitUndefined(value);\n    }\n    else if (!_.isUndefined(value)) {\n      result[key] = value;\n    }\n  });\n}\n\nexport default omitUndefined;","import { LocalCollection } from 'meteor/minimongo';\n\nfunction throwIfSelectorIsNotId(selector, methodName) {\n  if (!LocalCollection._selectorIsIdPerhapsAsObject(selector)) {\n    throw new Meteor.Error(\n      403,\n      `Not permitted. Untrusted code may only ${methodName} documents by ID.`\n    );\n  }\n};\n\nexport default throwIfSelectorIsNotId;","import _ from 'lodash';\nimport AstroClass from '../../../core/class.js';\nimport resolveValues from '../../fields/utils/resolve_values.js';\n\nfunction transformToClass(className, options = {}) {\n  // Set default options.\n  _.defaults(options, {\n    defaults: true\n  });\n  options.clone = false;\n\n  return function(rawDoc) {\n    let Class = AstroClass.get(className);\n\n    if (Class) {\n      const typeField = Class.getTypeField();\n      if (typeField) {\n        const TypeClass = AstroClass.get(rawDoc[typeField]);\n        if (TypeClass) {\n          Class = TypeClass;\n        }\n      }\n\n      // Resolve values using the \"resolveValue\" method if provided.\n      const resolvedDoc = resolveValues({\n        Class,\n        values: rawDoc\n      });\n\n      const doc = new Class(resolvedDoc, options);\n      doc._isNew = false;\n      return doc;\n    }\n\n    return rawDoc;\n  };\n};\n\nexport default transformToClass;\n","import Event from '../../events/event.js';\n\nfunction triggerAfterInsert(doc, trusted) {\n\t// Trigger the \"afterInsert\" event handlers.\n\tdoc.dispatchEvent(new Event('afterInsert', {\n\t\tpropagates: true,\n\t\ttrusted: trusted\n\t}));\n};\n\nexport default triggerAfterInsert;","import Event from '../../events/event.js';\n\nfunction triggerAfterRemove(doc, trusted) {\n\t// Trigger the \"afterRemove\" event handlers.\n\tdoc.dispatchEvent(new Event('afterRemove', {\n\t\tpropagates: true,\n\t\ttrusted: trusted\n\t}));\n};\n\nexport default triggerAfterRemove;","import Event from '../../events/event.js';\n\nfunction triggerAfterSave(doc, trusted) {\n\t// Trigger the \"afterSave\" event handlers.\n\tdoc.dispatchEvent(new Event('afterSave', {\n\t\tpropagates: true,\n\t\ttrusted: trusted\n\t}));\n};\n\nexport default triggerAfterSave;","import Event from '../../events/event.js';\n\nfunction triggerAfterUpdate(doc, trusted) {\n\t// Trigger the \"afterUpdate\" event handlers.\n\tdoc.dispatchEvent(new Event('afterUpdate', {\n\t\tpropagates: true,\n\t\ttrusted: trusted\n\t}));\n};\n\nexport default triggerAfterUpdate;","import Event from '../../events/event.js';\n\nfunction triggerBeforeInsert(doc, trusted) {\n\t// Trigger the \"beforeInsert\" event handlers.\n\tif (!doc.dispatchEvent(new Event('beforeInsert', {\n\t\t\tcancelable: true,\n\t\t\tpropagates: true,\n\t\t\ttrusted: trusted\n\t\t}))) {\n\t\t// If an event was prevented, then we stop here.\n\t\tthrow new Meteor.Error('prevented', 'Operation prevented', {\n\t\t\teventName: 'beforeInsert'\n\t\t});\n\t}\n};\n\nexport default triggerBeforeInsert;","import Event from '../../events/event.js';\n\nfunction triggerBeforeRemove(doc, trusted) {\n\t// Trigger the \"beforeRemove\" event handlers.\n\tif (!doc.dispatchEvent(new Event('beforeRemove', {\n\t\t\tcancelable: true,\n\t\t\tpropagates: true,\n\t\t\ttrusted: trusted\n\t\t}))) {\n\t\t// If an event was prevented, then we stop here.\n\t\tthrow new Meteor.Error('prevented', 'Operation prevented', {\n\t\t\teventName: 'beforeRemove'\n\t\t});\n\t}\n};\n\nexport default triggerBeforeRemove;","import Event from '../../events/event.js';\n\nfunction triggerBeforeSave(doc, trusted) {\n\t// Trigger the \"beforeSave\" event handlers.\n\tif (!doc.dispatchEvent(new Event('beforeSave', {\n\t\t\tcancelable: true,\n\t\t\tpropagates: true,\n\t\t\ttrusted: trusted\n\t\t}))) {\n\t\t// If an event was prevented, then we stop here.\n\t\tthrow new Meteor.Error('prevented', 'Operation prevented', {\n\t\t\teventName: 'beforeSave'\n\t\t});\n\t}\n};\n\nexport default triggerBeforeSave;","import Event from '../../events/event.js';\n\nfunction triggerBeforeUpdate(doc, trusted) {\n\t// Trigger the \"beforeUpdate\" event handlers.\n\tif (!doc.dispatchEvent(new Event('beforeUpdate', {\n\t\t\tcancelable: true,\n\t\t\tpropagates: true,\n\t\t\ttrusted: trusted\n\t\t}))) {\n\t\t// If an event was prevented, then we stop here.\n\t\tthrow new Meteor.Error('prevented', 'Operation prevented', {\n\t\t\teventName: 'beforeUpdate'\n\t\t});\n\t}\n};\n\nexport default triggerBeforeUpdate;","import Module from '../../core/module.js';\n// Validators.\nimport './validators/comparison/choice.js';\nimport './validators/comparison/email.js';\nimport './validators/comparison/equal.js';\nimport './validators/comparison/not_equal.js';\nimport './validators/comparison/regexp.js';\nimport './validators/existence/null.js';\nimport './validators/existence/not_null.js';\nimport './validators/existence/required.js';\nimport './validators/logical/and.js';\nimport './validators/logical/or.js';\nimport './validators/nested/every.js';\nimport './validators/nested/has.js';\nimport './validators/nested/includes.js';\nimport './validators/size/gt.js';\nimport './validators/size/gte.js';\nimport './validators/size/length.js';\nimport './validators/size/lt.js';\nimport './validators/size/lte.js';\nimport './validators/size/max_length.js';\nimport './validators/size/min_length.js';\nimport './validators/type/array.js';\nimport './validators/type/boolean.js';\nimport './validators/type/class.js';\nimport './validators/type/date.js';\nimport './validators/type/integer.js';\nimport './validators/type/mongo_object_id.js';\nimport './validators/type/number.js';\nimport './validators/type/object.js';\nimport './validators/type/string.js';\n// Utils.\nimport documentValidate from './utils/document_validate.js';\nimport parseValidators from './utils/parse_validators.js';\n// Hooks.\nimport onInitSchema from './hooks/init_schema.js';\nimport onInitDefinition from './hooks/init_definition.js';\nimport onParseDefinition from './hooks/parse_definition.js';\nimport onMergeDefinitions from './hooks/merge_definitions.js';\nimport onApplyDefinition from './hooks/apply_definition.js';\nimport onInitClass from './hooks/init_class.js';\n\nModule.create({\n\tname: 'validators',\n\tonInitSchema: onInitSchema,\n\tonInitDefinition: onInitDefinition,\n\tonParseDefinition: onParseDefinition,\n\tonMergeDefinitions: onMergeDefinitions,\n\tonApplyDefinition: onApplyDefinition,\n\tonInitClass: onInitClass,\n\tutils: {\n\t\tdocumentValidate: documentValidate,\n\t\tparseValidators: parseValidators\n\t}\n});","import { ValidationError } from 'meteor/mdg:validation-error';\nimport Validators from './validators.js';\n\nclass Validator {\n  constructor(definition) {\n    this.name = definition.name;\n    if (definition.parseParam) {\n      this.parseParam = definition.parseParam;\n    }\n    if (definition.isValid) {\n      this.isValid = definition.isValid;\n    }\n    if (definition.validate) {\n      this.validate = definition.validate;\n    }\n    if (definition.resolveError) {\n      this.resolveError = definition.resolveError;\n    }\n  }\n\n  validate({\n    doc,\n    name,\n    nestedName,\n    value,\n    param,\n    resolveParam,\n    message,\n    resolveError\n  }) {\n    // Get the class name, which will be used later for letting know what class\n    // thrown error.\n    const className = doc.constructor.getName();\n\n    // Resolve param is the \"resolveParam\" function is provided.\n    if (Match.test(resolveParam, Function)) {\n      param = resolveParam({\n        doc,\n        name,\n        nestedName,\n        value\n      });\n    }\n    // Parse param type if validator has parsing function.\n    if (Match.test(this.parseParam, Function)) {\n      this.parseParam(param);\n    }\n    // Prepare data for validation.\n    const args = {\n      className,\n      doc,\n      name,\n      nestedName,\n      value,\n      param,\n      validator: this.name\n    };\n    // Perform validation.\n    if (!this.isValid(args)) {\n      // Prepare function for throwing validation error.\n      const throwError = (message) => {\n        // Throw error only if the error message has been successfully\n        // generated.\n        if (!message) {\n          return;\n        }\n        // Throw error.\n        throw new ValidationError([{\n          className,\n          type: this.name,\n          name,\n          nestedName,\n          value,\n          param,\n          message\n        }], message);\n      };\n\n      // Generate error message using the \"resolveError\" function if provided.\n      if (Match.test(resolveError, Function)) {\n        throwError(resolveError(args));\n      }\n      // Get error message from the string if provided.\n      if (Match.test(message, String)) {\n        throwError(message);\n      }\n      // Get error by executing a class level \"resolveError\" function.\n      let Class = doc.constructor;\n      let classResolveError = Class.getResolveError();\n      if (classResolveError instanceof Function) {\n        throwError(classResolveError(args));\n      }\n      // Get default error message.\n      if (this.resolveError instanceof Function) {\n        throwError(this.resolveError(args));\n      }\n      throwError(ValidationError.DEFAULT_REASON);\n    }\n  }\n\n  static create(definition) {\n    let validator = new Validator(definition);\n    Validator.validators[validator.name] = validator;\n\n    // Create a validation function.\n    return Validators[validator.name] = function(options) {\n      validator.validate(options);\n    }\n  }\n};\n\nValidator.validators = {};\n\nexport default Validator;","const Validators = {};\n\nexport default Validators;","import castNested from '../../fields/utils/cast_nested.js';\nimport documentValidate from '../utils/document_validate.js';\nimport callMeteorMethod from '../../storage/utils/call_meteor_method.js';\n\nfunction validate(args = {}, callback) {\n  let doc = this;\n  let Class = doc.constructor;\n  let Collection = Class.getCollection();\n  let connection = Collection && Collection._connection;\n  if (!connection && (!Collection || !Collection._name)) {\n    connection = Meteor.connection;\n  }\n\n  // If the first argument is callback function then reassign values.\n  if (arguments.length === 1 && Match.test(args, Function)) {\n    callback = args;\n    args = {};\n  }\n\n  let {\n    fields = Class.getValidationOrder(),\n    stopOnFirstError = true,\n    simulation = true,\n  } = args;\n\n  // If a fields property is a string then put it into array.\n  if (Match.test(fields, String)) {\n    fields = [fields];\n  }\n\n  // Cast nested documents.\n  castNested({\n    doc\n  });\n\n  // Prepare arguments for meteor method and utility.\n  let methodArgs = {\n    doc,\n    fields,\n    stopOnFirstError,\n    simulation,\n  };\n\n  // If we are dealing with a remote collection and we are not on the server.\n  if (connection && connection !== Meteor.server) {\n    // Prepare arguments for meteor method.\n    let methodName = '/Astronomy/validate';\n\n    try {\n      // Run Meteor method.\n      return callMeteorMethod(\n        Class, methodName, [methodArgs], callback\n      );\n    }\n    // Catch stub exceptions.\n    catch (err) {\n      if (callback) {\n        callback(err);\n        return null;\n      }\n      throw err;\n    }\n  }\n\n  // If we can just validate a document without calling the meteor method. We\n  // may be on the server or the collection may be local.\n  try {\n    // Validate a document.\n    let result = documentValidate(methodArgs);\n    if (callback) {\n      callback();\n    }\n    return result;\n  }\n  catch (err) {\n    if (callback) {\n      callback(err);\n      return null;\n    }\n    throw err;\n  }\n}\n\nexport default validate;","import _ from 'lodash';\n\nfunction validateAll(options = {}, callback) {\n  let doc = this;\n  let Class = doc.constructor;\n\n  // If the first argument is callback function then reassign values.\n  if (arguments.length === 1 && Match.test(options, Function)) {\n    callback = options;\n    options = {};\n  }\n\n  _.extend(options, {\n    fields: Class.getValidationOrder(),\n    stopOnFirstError: false\n  });\n\n  doc.validate(options, callback);\n};\n\nexport default validateAll;","import { Match } from 'meteor/check';\nimport { ValidationError } from 'meteor/mdg:validation-error';\n\nfunction getCheckPattern() {\n  const Class = this;\n  return Match.Where(function(doc) {\n    try {\n      doc.validate();\n    }\n    catch(err) {\n      if (ValidationError.is(err)) {\n        const firstError = err.details[0];\n        const matchError = new Match.Error(firstError.message);\n        matchError.sanitizedError = err;\n        throw matchError;\n      }\n      else {\n        throw err;\n      }\n    }\n    return true;\n  });\n};\n\nexport default getCheckPattern;","function getResolveError() {\n\tlet Class = this;\n\n\treturn Class.schema.resolveError;\n};\n\nexport default getResolveError;","import _ from 'lodash';\n\nfunction getValidationOrder() {\n\tlet Class = this;\n\n\t// Get all validators.\n\tlet validators = Class.getValidators();\n\t// Get fields names for defined validators.\n\tlet fieldsNames = Class.getFieldsNames();\n\t// Make variable name shorter.\n\tlet validationOrder = Class.schema.validationOrder;\n\n\t// If there is a validation order provided, then combine fields provided in\n\t// the validation order with the order of validators.\n\tif (validationOrder) {\n\t\t// Detect what fields are not present in the validation order.\n\t\tlet diff = _.difference(fieldsNames, validationOrder);\n\t\t// Combine validation order with fields that left.\n\t\treturn validationOrder.concat(diff);\n\t}\n\t// If there is no validation order, then just return fields names in the order\n\t// in which validators were defined.\n\telse {\n\t\treturn fieldsNames;\n\t}\n};\n\nexport default getValidationOrder;","function getValidators(fieldName) {\n\tlet Class = this;\n\n\tif (!Match.test(fieldName, Match.Optional(String))) {\n\t\tthrow TypeError(\n\t\t\t'The first argument of the \"getValidators\" function has to be a string ' +\n\t\t\t'or left empty'\n\t\t);\n\t}\n\n\tif (fieldName) {\n\t\treturn Class.schema.validators[fieldName];\n\t}\n\telse {\n\t\treturn Class.schema.validators;\n\t}\n};\n\nexport default getValidators;","import _ from 'lodash';\n\nfunction validate(rawDoc) {\n  const Class = this;\n  const doc = new Class(rawDoc);\n  const args = _.tail(arguments);\n  return doc.validate.apply(doc, args);\n};\n\nexport default validate;","import _ from 'lodash';\n\nfunction validateAll(rawDoc) {\n  const Class = this;\n  const doc = new Class(rawDoc);\n  const args = _.tail(arguments);\n  return doc.validateAll.apply(doc, args);\n};\n\nexport default validateAll;","import _ from 'lodash';\nimport hasMeteorMethod from '../../storage/utils/has_meteor_method.js';\nimport meteorValidate from '../meteor_methods/validate.js';\n\nfunction onApplyDefinition(Class, parsedDefinition, className) {\n  _.each(parsedDefinition.validators, function(validators, fieldName) {\n    Class.schema.validators[fieldName] =\n      Class.schema.validators[fieldName] || [];\n    _.each(validators, function(validator) {\n      Class.schema.validators[fieldName] =\n        Class.schema.validators[fieldName].concat(validator);\n    });\n  });\n\n  // Add the \"/Astronomy/validate\" meteor method only when a class has assigned\n  // collection.\n  let Collection = Class.getCollection();\n  // If it's a remote collection then we register methods on the connection\n  // object of the collection.\n  let connection = Collection && Collection._connection;\n  // If it's not a remote collection than use main Meteor connection.\n  if (!connection && (!Collection || !Collection._name)) {\n    connection = Meteor.connection || Meteor.server;\n  }\n  if (connection) {\n    // Prepare meteor methods to be added.\n    let meteorMethods = {\n      '/Astronomy/validate': meteorValidate\n    };\n    _.each(meteorMethods, (meteorMethod, methodName) => {\n      if (!hasMeteorMethod(connection, methodName)) {\n        // Add meteor method.\n        connection.methods(_.zipObject([methodName], [meteorMethod]));\n      }\n    });\n  }\n\n  Class.schema.resolveError = parsedDefinition.resolveError;\n};\n\nexport default onApplyDefinition;","// Class static methods.\nimport getResolveError from '../class_static_methods/get_resolve_error.js';\nimport getValidationOrder from '../class_static_methods/get_validation_order.js';\nimport getValidators from '../class_static_methods/get_validators.js';\nimport validateStatic from '../class_static_methods/validate.js';\nimport validateAllStatic from '../class_static_methods/validateAll.js';\nimport getCheckPatternStatic from '../class_static_methods/getCheckPattern.js';\n// Class prototype methods.\nimport validate from '../class_prototype_methods/validate.js';\nimport validateAll from '../class_prototype_methods/validate_all.js';\n\nfunction onInitClass(Class, className) {\n\t// Class static methods.\n\tClass.getResolveError = getResolveError;\n\tClass.getValidationOrder = getValidationOrder;\n\tClass.getValidators = getValidators;\n\tClass.validate = validateStatic;\n\tClass.validateAll = validateAllStatic;\n\tClass.getCheckPattern = getCheckPatternStatic;\n\t// Class prototype methods.\n\tClass.prototype.validate = validate;\n\tClass.prototype.validateAll = validateAll;\n};\n\nexport default onInitClass;","function onInitDefinition(definition, className) {\n\tdefinition.validators = {};\n\tdefinition.resolveError = undefined;\n};\n\nexport default onInitDefinition;","function onInitSchema(schema, className) {\n\tschema.validators = {};\n\tschema.resolveError = undefined;\n};\n\nexport default onInitSchema;","import _ from 'lodash';\n\nfunction onMergeDefinitions(targetDefinition, sourceDefinition, ClassName) {\n\t_.each(sourceDefinition.validators, function(validators, fieldName) {\n\t\ttargetDefinition.validators[fieldName] =\n\t\t\ttargetDefinition.validators[fieldName] || [];\n\t\ttargetDefinition.validators[fieldName] =\n\t\t\ttargetDefinition.validators[fieldName].concat(validators);\n\t});\n\n\ttargetDefinition.resolveError = sourceDefinition.resolveError;\n};\n\nexport default onMergeDefinitions;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport parseValidators from '../utils/parse_validators.js';\n\nfunction onParseDefinition(parsedDefinition, definition, className) {\n\tif (definition.resolveError) {\n\t\tif (!Match.test(definition.resolveError, Function)) {\n\t\t\tthrowParseError([{\n\t\t\t\t\t'class': className\n\t\t\t\t}, {\n\t\t\t\t\t'property': 'resolveError'\n\t\t\t\t},\n\t\t\t\t'Property values has to be a function'\n\t\t\t]);\n\t\t}\n\n\t\tparsedDefinition.resolveError = definition.resolveError;\n\t}\n\n\tif (definition.fields) {\n\t\t_.each(definition.fields, function(fieldDefinition, fieldName) {\n\t\t\tif (_.has(fieldDefinition, 'validators')) {\n\t\t\t\tparseValidators(\n\t\t\t\t\tfieldDefinition.validators, [{\n\t\t\t\t\t\t'class': className\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'property': 'fields'\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'field': fieldName\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'property': 'validators'\n\t\t\t\t\t}]\n\t\t\t\t);\n\n\t\t\t\tparsedDefinition.validators[fieldName] = fieldDefinition.validators;\n\t\t\t\tfieldDefinition.validators = undefined;\n\t\t\t}\n\t\t});\n\t}\n\n\tif (definition.validators) {\n\t\t_.each(definition.validators, function(validators, fieldName) {\n\t\t\tparseValidators(\n\t\t\t\tvalidators, [{\n\t\t\t\t\t'class': className\n\t\t\t\t}, {\n\t\t\t\t\t'property': 'validators'\n\t\t\t\t}]\n\t\t\t);\n\n\t\t\tparsedDefinition.validators[fieldName] = validators;\n\t\t});\n\t}\n};\n\nexport default onParseDefinition;","import documentValidate from '../utils/document_validate.js';\n\nfunction validate(options) {\n  return documentValidate(options);\n};\n\nexport default validate;","import _ from 'lodash';\nimport AstroClass from '../../../core/class.js';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport castNested from '../../fields/utils/cast_nested.js';\nimport isNestedFieldName from '../../fields/utils/is_nested_field_name.js';\nimport traverse from '../../fields/utils/traverse.js';\nimport ObjectField from '../../fields/ObjectField';\nimport ListField from '../../fields/ListField';\nimport Validators from '../validators.js';\nimport { ValidationError } from 'meteor/mdg:validation-error';\n\nfunction documentValidate(options = {}) {\n  let {\n    doc,\n    fields,\n    prefix = '',\n    stopOnFirstError = true,\n    simulation = true\n  } = options;\n\n  // Stop execution, if we are not on the server, when the \"simulation\" flag is\n  // not set.\n  if (!simulation && !Meteor.isServer) {\n    return;\n  }\n\n  let Class = doc.constructor;\n\n  // Cast nested fields.\n  castNested({\n    doc\n  });\n\n  // Prepare array for storing errors list.\n  let errors = [];\n\n  // Helper function for catching and collecting errors.\n  const catchValidationError = (func) => {\n    try {\n      func();\n    }\n    catch (err) {\n      // If it's ValidationError.\n      if (ValidationError.is(err)) {\n        // If we stop on first error then just throw error again.\n        if (stopOnFirstError) {\n          throw err;\n        }\n        // Otherwise we collect errors.\n        else {\n          _.each(err.details, (details) => {\n            errors.push(details);\n          });\n        }\n      }\n      // It it's not ValidationError, then we throw error again.\n      else {\n        throw err;\n      }\n    }\n  };\n\n  // If no fields were passed to validation, then we pick default validation\n  // order.\n  if (!fields) {\n    fields = Class.getValidationOrder();\n  }\n\n  _.each(fields, (name) => {\n    // If it is a nested field pattern name then we have to look for the most\n    // nested document and validate the nested field.\n    if (isNestedFieldName(name)) {\n      traverse(doc, name, (nestedDoc, nestedName, field) => {\n        catchValidationError(() => {\n          documentValidate({\n            doc: nestedDoc,\n            fields: [nestedName],\n            prefix: name.substr(0, name.lastIndexOf(nestedName)),\n            stopOnFirstError,\n            simulation\n          });\n        });\n      });\n      return;\n    }\n\n    let field = Class.getField(name);\n\n    // Move to the next one if a field does not exist.\n    if (!field) {\n      return;\n    }\n\n    // We do not validate transient fields.\n    if (field.transient) {\n      return;\n    }\n\n    // Get value of the field.\n    let value = doc.get(name);\n\n    // If a field is optional and value is undefined then we do not validate.\n    if (field.getOptional(doc) && _.isNil(value)) {\n      return;\n    }\n\n    // Execute validation in the try-catch block. That's because we want to\n    // continue validation if the \"stopOnFirstError\" flag is set to false.\n    catchValidationError(() => {\n      // First, execute type level validators.\n      field.validate({\n        doc,\n        name: prefix + name,\n        nestedName: name,\n        value\n      });\n      // Get validators for a given field.\n      let validators = Class.getValidators(name);\n      _.each(validators, ({\n        type,\n        param,\n        resolveParam,\n        message,\n        resolveError\n      }) => {\n        // Get validation helper function.\n        let validationFunction = Validators[type];\n        // Execute single validator.\n        validationFunction({\n          doc,\n          name: prefix + name,\n          nestedName: name,\n          value,\n          param,\n          resolveParam,\n          message,\n          resolveError\n        });\n      });\n    });\n\n    // If it is the object field then validate it.\n    if (field instanceof ObjectField) {\n      if (value instanceof AstroClass) {\n        catchValidationError(() => {\n          documentValidate({\n            doc: value,\n            fields: value.constructor.getValidationOrder(),\n            prefix: field.name + '.',\n            stopOnFirstError\n          });\n        });\n      }\n    }\n    // If it is the list field then validate each one.\n    else if (field instanceof ListField && field.isClass) {\n      _.each(value, (element, index) => {\n        if (element instanceof AstroClass) {\n          catchValidationError(() => {\n            documentValidate({\n              doc: element,\n              fields: element.constructor.getValidationOrder(),\n              prefix: field.name + '.' + index + '.',\n              stopOnFirstError\n            });\n          });\n        }\n      });\n    }\n  });\n\n  // If we have not thrown any error yet then it means that there are no errors\n  // or we do not throw on the first error.\n  if (errors.length > 0) {\n    throw new ValidationError(errors, errors[0].message);\n  }\n};\n\nexport default documentValidate;","import _ from 'lodash';\nimport throwParseError from '../../core/utils/throw_parse_error.js';\nimport Validators from '../validators.js';\n\nconst validatorsPattern = [{\n  type: String,\n  param: Match.Optional(Match.Any),\n  resolveParam: Match.Optional(Function),\n  message: Match.Optional(String),\n  resolveError: Match.Optional(Function)\n}];\n\nfunction parseValidators(validators, parseContext) {\n  // Validators list is an array of object that should include at least the\n  // \"type\" property.\n  if (validators && !Match.test(validators, validatorsPattern)) {\n    throwParseError(_.union(\n      parseContext, ['Validators definition has to be an array of objects']\n    ));\n  }\n\n  _.forEach(validators, function(validator) {\n    // Check if a validator of a given type exists.\n    if (!_.has(Validators, validator.type)) {\n      throwParseError(_.union(\n        parseContext, [`There is no \"${validator.type}\" validator`]\n      ));\n    }\n  });\n};\n\nexport default parseValidators;","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'choice',\n\tparseParam(param) {\n    if (!Match.test(param, [Match.Any])) {\n      throw new TypeError(\n        `Parameter for the \"choice\" validator has to be an array of values`\n      );\n    }\n  },\n  isValid({ value, param }) {\n    return _.includes(param, value);\n  },\n  resolveError({ name, param }) {\n\t\tvar choices = param.join(', ');\n    return `\"${name}\" has to be one of the values ${choices}`;\n  }\n});","import Validator from '../../validator.js';\n\n// Email regular expression.\nlet re = /^[A-Z0-9._%+-]+@(?:[A-Z0-9-]+\\.)+[A-Z]{2,}$/i;\n\nValidator.create({\n  name: 'email',\n  isValid({ value }) {\n    return re.test(value);\n  },\n  resolveError({ name, param }) {\n    return `\"${name}\" should be a valid email address`;\n  }\n});","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'equal',\n  isValid({ value, param }) {\n    return EJSON.equals(value, param);\n  },\n  resolveError({ name, param }) {\n    return `\"${name}\" should be equal ${param}`;\n  }\n});\n","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'notEqual',\n  isValid({ value, param }) {\n    return !EJSON.equals(value, param);\n  },\n  resolveError({ name, param }) {\n    return `\"${name}\" should not to be equal ${param}`;\n  }\n});\n","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'regexp',\n\tparseParam(param) {\n    if (!Match.test(param, RegExp)) {\n      throw new TypeError(\n        `Parameter for the \"regexp\" validator has to be a regular expression`\n      );\n    }\n  },\n  isValid({ value, param }) {\n    return param.test(value);\n  },\n  resolveError({ name, param }) {\n    return `\"${name}\" does not match the \"${param.toString()}\" regular expression`;\n  }\n});","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'notNull',\n  isValid({ value }) {\n    return value !== null;\n  },\n  resolveError({ name }) {\n    return `\"${name}\" should not be null`;\n  }\n});","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'null',\n  isValid({ value }) {\n    return value === null;\n  },\n  resolveError({ name }) {\n    return `\"${name}\" should be null`;\n  }\n});","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'required',\n  isValid({ value }) {\n    return value !== null && value !== undefined;\n  },\n  resolveError({ name }) {\n    return `\"${name}\" is required`;\n  }\n});","import _ from 'lodash';\nimport parseValidators from '../../utils/parse_validators.js';\nimport Validator from '../../validator.js';\nimport Validators from '../../validators.js';\n\nValidator.create({\n  name: 'and',\n  parseParam(param) {\n    parseValidators(param);\n  },\n  validate({\n    doc,\n    name,\n    value,\n    param: validators\n  }) {\n    _.each(validators, function(validator) {\n      // Get validator.\n      const validationFunction = Validators[validator.type];\n      // Execute single validator.\n      validationFunction({\n        doc,\n        name,\n        value,\n        param: validator.param\n      });\n    });\n  }\n});","import _ from 'lodash';\nimport parseValidators from '../../utils/parse_validators.js';\nimport Validator from '../../validator.js';\nimport Validators from '../../validators.js';\nimport { ValidationError } from 'meteor/mdg:validation-error';\n\nValidator.create({\n  name: 'or',\n  parseParam(param) {\n    parseValidators(param);\n  },\n  validate({\n    doc,\n    name,\n    value,\n    param: validators\n  }) {\n    let firstError;\n    const isValid = _.some(validators, function(validator) {\n      // Get validator.\n      const validationFunction = Validators[validator.type];\n      // Execute single validator.\n      try {\n        validationFunction({\n          doc,\n          name,\n          value,\n          param: validator.param\n        });\n        return true;\n      }\n      catch (err) {\n        if (ValidationError.is(err)) {\n          // Collect only the first error that occured.\n          if (!firstError) {\n            firstError = err;\n          }\n          return false;\n        }\n        else {\n          throw err;\n        }\n      }\n    });\n\n    if (!isValid) {\n      throw firstError;\n    }\n  }\n});","import _ from 'lodash';\nimport parseValidators from '../../utils/parse_validators.js';\nimport Validator from '../../validator.js';\nimport Validators from '../../validators.js';\n\nValidator.create({\n  name: 'every',\n  parseParam(param) {\n    parseValidators(param);\n  },\n  validate({\n    doc,\n    name,\n    nestedName,\n    value,\n    param: validators\n  }) {\n    if (!_.isArray(value)) {\n      throw new TypeError(\n        `The \"every\" validator can only work with arrays`\n      );\n    }\n\n    // Execute validators for each array element.\n    _.each(value, function(element, index) {\n      // Execute each validator.\n      _.each(validators, function(validator) {\n        // Get validator.\n        const validationFunction = Validators[validator.type];\n        // Execute single validator.\n        validationFunction({\n          doc,\n          name: `${name}.${index}`,\n          nestedName: `${nestedName}.${index}`,\n          value: element,\n          param: validator.param\n        });\n      });\n    });\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'has',\n  isValid({ value, param }) {\n    if (!_.isObject(value)) {\n      throw new TypeError(\n        `The \"has\" validator can only work with objects`\n      );\n    }\n    return _.has(value, param);\n  },\n  resolveError({ name, param }) {\n    return `The \"${name}\" field does not have the \"${param}\" property`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'includes',\n  isValid({ value, param }) {\n    if (!_.isArray(value) && !_.isArray(object)) {\n      throw new TypeError(\n        `The \"includes\" validator can only work with arrays and objects`\n      );\n    }\n    return _.includes(value, param);\n  },\n  resolveError({ name, param }) {\n    return `The \"${name}\" field does not contain the \"${param}\" value`;\n  }\n});","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'gt',\n  isValid({ value, param }) {\n    return value > param;\n  },\n  resolveError({ name, param }) {\n    return `\"${name}\" has to be greater than ${param}`;\n  }\n});","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'gte',\n  isValid({ value, param }) {\n    return value >= param;\n  },\n  resolveError({ name, param }) {\n    return `\"${name}\" has to be greater than or equal ${param}`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'length',\n  parseParam(param) {\n    if (!Match.test(param, Number)) {\n      throw new TypeError(\n        `Parameter for the \"length\" validator has to be a number`\n      );\n    }\n  },\n  isValid({ value, param }) {\n    if (!_.has(value, 'length')) {\n      throw new TypeError(\n        `Length of the value can not be measured`\n      );\n    }\n    return value.length === param;\n  },\n  resolveError({ name, param }) {\n    return `Length of \"${name}\" has to be ${param}`;\n  }\n});","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'lt',\n  isValid({ value, param }) {\n    return value < param;\n  },\n  resolveError({ name, param }) {\n    return `\"${name}\" has to be less than ${param}`;\n  }\n});","import Validator from '../../validator.js';\n\nValidator.create({\n  name: 'lte',\n  isValid({ value, param }) {\n    return value <= param;\n  },\n  resolveError({ name, param }) {\n    return `\"${name}\" has to be less than or equal ${param}`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'maxLength',\n  parseParam(param) {\n    if (!Match.test(param, Number)) {\n      throw new TypeError(\n        `Parameter for the \"maxLength\" validator has to be a number`\n      );\n    }\n  },\n  isValid({ value, param }) {\n    if (!_.has(value, 'length')) {\n      return false;\n    }\n    return value.length <= param;\n  },\n  resolveError({ name, param }) {\n    return `Length of \"${name}\" has to be at most ${param}`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'minLength',\n  parseParam(param) {\n    if (!Match.test(param, Number)) {\n      throw new TypeError(\n        `Parameter for the \"minLength\" validator has to be a number`\n      );\n    }\n  },\n  isValid({ value, param }) {\n    if (!_.has(value, 'length')) {\n      return false;\n    }\n    return value.length >= param;\n  },\n  resolveError({ name, param }) {\n    return `Length of \"${name}\" has to be at least ${param}`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'array',\n  isValid({ value }) {\n    return _.isArray(value);\n  },\n  resolveError({ name }) {\n    return `\"${name}\" has to be an array`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'boolean',\n  isValid({ value }) {\n    return _.isBoolean(value);\n  },\n  resolveError({ name }) {\n    return `\"${name}\" has to be a boolean`;\n  }\n});","import Validator from '../../validator.js';\nimport AstroClass from '../../../../core/class.js';\n\nValidator.create({\n  name: 'class',\n  parseParam(param) {\n    if (!AstroClass.isParentOf(param)) {\n      throw new TypeError(\n        `Parameter for the \"class\" validator has to be an Astronomy class`\n      );\n    }\n  },\n  isValid({\n    value,\n    param: Class\n  }) {\n    return value instanceof Class;\n  },\n  resolveError({\n    name,\n    param: Class\n  }) {\n    let className = Class.getName();\n    return `\"${name}\" has to be ${className}`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'date',\n  isValid({ value }) {\n    return _.isDate(value);\n  },\n  resolveError({ name }) {\n    return `\"${name}\" has to be a date`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'integer',\n  isValid({ value }) {\n    return _.isInteger(value);\n  },\n  resolveError({ name }) {\n    return `\"${name}\" has to be an integer`;\n  }\n});","import Validator from '../../validator.js';\nimport { Match } from 'meteor/check';\nimport { Mongo } from 'meteor/mongo';\n\nValidator.create({\n  name: 'mongoObjectID',\n  isValid({ value }) {\n    return Match.test(value, Mongo.ObjectID);;\n  },\n  resolveError({ name }) {\n    return `\"${name}\" has to be a Mongo.ObjectID`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'number',\n  isValid({ value }) {\n    return _.isNumber(value);\n  },\n  resolveError({ name }) {\n    return `\"${name}\" has to be a number`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'object',\n  isValid({ value }) {\n    return _.isObject(value);\n  },\n  resolveError({ name }) {\n    return `\"${name}\" has to be an object`;\n  }\n});","import _ from 'lodash';\nimport Validator from '../../validator.js';\n\nValidator.create({\n  name: 'string',\n  isValid({ value }) {\n    return _.isString(value);\n  },\n  resolveError({ name }) {\n    return `\"${name}\" has to be a string`;\n  }\n});","exports.name = \"lodash\";\nexports.version = \"4.14.1\";\nexports.main = \"lodash.js\";\n"]}