{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/kadira:react-layout/lib/react_layout.js","filenameRelative":"/packages/kadira:react-layout/lib/react_layout.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/kadira:react-layout/lib/react_layout.js.map","sourceFileName":"/packages/kadira:react-layout/lib/react_layout.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"react_layout"},"ignored":false,"code":"ReactLayout = {};\nReactLayout._domLoaded = false;\nReactLayout._rootProps = {};\nReactLayout._readyCallbacks = [];\n\nReactLayout.setRootProps = function (rootProps) {\n  this._rootProps = rootProps;\n};\n\nReactLayout._buildRootNode = function () {\n  var props = this._rootProps || {};\n  props.id = 'react-root';\n  if (props.className) {\n    props['class'] = props.className;\n    delete props.className;\n  }\n\n  var propsString = '';\n  for (var key in props) {\n    var value = props[key];\n    propsString += key + '=\"' + value + '\" ';\n  }\n\n  var html = '<div ' + propsString + '></div>';\n  return html;\n};\n\nReactLayout._getRootNode = function () {\n  var rootNode = document.getElementById('react-root');\n\n  if (rootNode) {\n    return rootNode;\n  } else {\n    var rootNodeHtml = this._buildRootNode();\n    var body = document.getElementsByTagName('body')[0];\n    body.insertAdjacentHTML('beforeend', rootNodeHtml);\n    rootNode = document.getElementById('react-root');\n    return rootNode;\n  }\n};\n\nReactLayout.render = function (layoutClass, regions) {\n  if (Meteor.isClient) {\n    return this._renderClient(layoutClass, regions);\n  } else {\n    return this._renderServer(layoutClass, regions);\n  }\n};\n\nReactLayout._renderServer = function (layoutClass, regions) {\n  var el = React.createElement(layoutClass, regions);\n  var elHtml = ReactDOMServer.renderToString(el);\n\n  var rootNodeHtml = this._buildRootNode();\n  var html = rootNodeHtml.replace('</div>', elHtml + '</div>');\n\n  if (Package['kadira:flow-router-ssr']) {\n    var FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n    var ssrContext = FlowRouter.ssrContext.get();\n    ssrContext.setHtml(html);\n  }\n};\n\nReactLayout._renderClient = function (layoutClass, regions) {\n  var self = this;\n  this._ready(function () {\n    var rootNode = self._getRootNode();\n    var el = React.createElement(layoutClass, regions);\n    ReactDOM.render(el, rootNode);\n  });\n};\n\nReactLayout._ready = function (cb) {\n  var self = this;\n  if (self._domLoaded) {\n    cb();\n  } else {\n    self._readyCallbacks.push(cb);\n  }\n};\n\n// wait for DOM is loading\nMeteor.startup(function () {\n  setTimeout(function () {\n    ReactLayout._domLoaded = true;\n    ReactLayout._readyCallbacks.forEach(function (fn) {\n      fn();\n    });\n  }, 10);\n});","ast":null,"map":{"version":3,"sources":["/packages/kadira:react-layout/lib/react_layout.js"],"names":[],"mappings":"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","file":"/packages/kadira:react-layout/lib/react_layout.js.map","sourcesContent":["ReactLayout = {};\nReactLayout._domLoaded = false;\nReactLayout._rootProps = {};\nReactLayout._readyCallbacks = [];\n\nReactLayout.setRootProps = function(rootProps) {\n  this._rootProps = rootProps;\n};\n\nReactLayout._buildRootNode = function() {\n  var props = this._rootProps || {};\n  props.id = 'react-root';\n  if(props.className) {\n    props.class = props.className;\n    delete props.className;\n  }\n\n  var propsString = '';\n  for(var key in props) {\n    var value = props[key];\n    propsString += key + '=\"' + value + '\" ';\n  }\n\n  var html = '<div ' + propsString + '></div>';\n  return html;\n};\n\nReactLayout._getRootNode = function() {\n  var rootNode = document.getElementById('react-root');\n\n  if(rootNode) {\n    return rootNode;\n  } else {\n    var rootNodeHtml = this._buildRootNode();\n    var body = document.getElementsByTagName('body')[0];\n    body.insertAdjacentHTML('beforeend', rootNodeHtml);\n    rootNode = document.getElementById('react-root');\n    return rootNode;\n  }\n};\n\nReactLayout.render = function(layoutClass, regions) {\n  if(Meteor.isClient) {\n    return this._renderClient(layoutClass, regions);\n  } else {\n    return this._renderServer(layoutClass, regions);\n  }\n};\n\nReactLayout._renderServer = function(layoutClass, regions) {\n  var el = React.createElement(layoutClass, regions);\n  var elHtml = ReactDOMServer.renderToString(el);\n\n  var rootNodeHtml = this._buildRootNode();\n  var html = rootNodeHtml.replace('</div>', elHtml + '</div>');\n\n  if(Package['kadira:flow-router-ssr']) {\n    var FlowRouter = Package['kadira:flow-router-ssr'].FlowRouter;\n    var ssrContext = FlowRouter.ssrContext.get();\n    ssrContext.setHtml(html);\n  }\n};\n\nReactLayout._renderClient = function(layoutClass, regions) {\n  var self = this;\n  this._ready(function() {\n    var rootNode = self._getRootNode();\n    var el = React.createElement(layoutClass, regions);\n    ReactDOM.render(el, rootNode);\n  });\n};\n\nReactLayout._ready = function(cb) {\n  var self = this;\n  if(self._domLoaded) {\n    cb();\n  } else {\n    self._readyCallbacks.push(cb);\n  }\n};\n\n// wait for DOM is loading\nMeteor.startup(function() {\n  setTimeout(function() {\n    ReactLayout._domLoaded = true;\n    ReactLayout._readyCallbacks.forEach(function(fn) {\n      fn();\n    });\n  }, 10);\n});\n"]},"hash":"2a7cf732e9225897228b28f2eb6f4cc5b8b320b5"}
