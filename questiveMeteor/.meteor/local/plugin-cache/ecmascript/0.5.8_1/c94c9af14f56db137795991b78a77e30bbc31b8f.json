{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/ui/join.js","filenameRelative":"/imports/ui/join.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/ui/join.js.map","sourceFileName":"/imports/ui/join.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"join"},"ignored":false,"code":"var React = require('react');\nvar Router = require('react-router');\nvar Query = require('./Search/Query');\nvar Results = require('./Search/Results');\n\nvar Join = React.createClass({\n\tdisplayName: 'Join',\n\n\n\t/*Here we set the initial state variables (this allows us to propagate the variables for maniuplation by the children components*/\n\t/*Also note the \"resuls\" state. This will be where we hold the data from our results*/\n\tgetInitialState: function getInitialState() {\n\t\treturn {\n\t\t\tqueryTerm: \"\",\n\t\t\tstartYear: \"\",\n\t\t\tendYear: \"\",\n\t\t\tresults: {}\n\t\t};\n\t},\n\n\t/*This function gets called if the user searches for a completely new set of parameters (i.e. if any of the search terms changes)*/\n\t/*If the user searches for the exact same thing, then React will ignore it.*/\n\tcomponentDidUpdate: function componentDidUpdate(prevProps, prevState) {\n\t\tconsole.log(\"COMPONENT UPDATED\");\n\t\tconsole.log(this.state.queryTerm);\n\t\tconsole.log(this.state.startYear);\n\t\tconsole.log(this.state.endYear);\n\n\t\tconsole.log(\"Previous State\", prevState);\n\n\t\tif (this.state.queryTerm != \"\" && (prevState.queryTerm != this.state.queryTerm || prevState.startYear != this.state.startYear || prevState.endYear != this.state.endYear)) {\n\t\t\thelpers.runQuery(this.state.queryTerm, this.state.startYear, this.state.endYear).then(function (data) {\n\t\t\t\tif (data != this.state.results) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tresults: data\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// console.log(\"RESULTS\", results)\n\t\t\t\t// console.log(\"DATA\", data)\n\n\t\t\t\t// This code is necessary to bind the keyword \"this\" when we say this.setState\n\t\t\t\t// to actually mean the component itself and not the runQuery function.\n\t\t\t}.bind(this));\n\t\t}\n\t},\n\n\t// This function will be passed down into children components so they can change the \"parent\"\n\t// i.e we will pass this method to the query component that way it can change the main component\n\t// to perform a new search\n\tsetQuery: function setQuery(newQuery, newStart, newEnd) {\n\t\tconsole.log(\"TEST\");\n\t\tthis.setState({\n\t\t\tqueryTerm: newQuery,\n\t\t\tstartYear: newStart,\n\t\t\tendYear: newEnd\n\t\t});\n\t},\n\n\t/*Render the function. Note how we deploy both the Query and the Results*/render: function render() {\n\t\tconsole.log(\"Render Results\", this.state.results);\n\n\t\treturn React.createElement(\n\t\t\t'div',\n\t\t\t{ className: 'main-container' },\n\t\t\tReact.createElement(Query, { updateSearch: this.setQuery }),\n\t\t\tReact.createElement(Results, { results: this.state.results })\n\t\t);\n\t}\n});\n\n// Export the module back to the route\nmodule.export(\"default\",exports.default=(Join));","ast":null,"map":{"version":3,"sources":["/imports/ui/join.js"],"names":[],"mappings":"AAAA,IAAI,QAAQ,QAAQ,OAAR,CAAZ;AACA,IAAI,SAAS,QAAQ,cAAR,CAAb;AACA,IAAI,QAAQ,QAAQ,gBAAR,CAAZ;AACA,IAAI,UAAU,QAAQ,kBAAR,CAAd;;AAEA,IAAI,OAAO,MAAM,WAAN,CAAkB;AAAA;;;;;AAI5B,kBAAiB,2BAAU;AAC1B,SAAO;AACN,cAAW,EADL;AAEN,cAAW,EAFL;AAGN,YAAS,EAHH;AAIN,YAAS;AAJH,GAAP;AAMA,EAX2B;;;;AAgB5B,qBAAoB,4BAAS,SAAT,EAAoB,SAApB,EAA8B;AACjD,UAAQ,GAAR,CAAY,mBAAZ;AACA,UAAQ,GAAR,CAAY,KAAK,KAAL,CAAW,SAAvB;AACA,UAAQ,GAAR,CAAY,KAAK,KAAL,CAAW,SAAvB;AACA,UAAQ,GAAR,CAAY,KAAK,KAAL,CAAW,OAAvB;;AAEA,UAAQ,GAAR,CAAY,gBAAZ,EAA8B,SAA9B;;AAGA,MAAI,KAAK,KAAL,CAAW,SAAX,IAAwB,EAAxB,KAA+B,UAAU,SAAV,IAAuB,KAAK,KAAL,CAAW,SAAlC,IAA+C,UAAU,SAAV,IAAuB,KAAK,KAAL,CAAW,SAAjF,IAA8F,UAAU,OAAV,IAAqB,KAAK,KAAL,CAAW,OAA7J,CAAJ,EACA;AACC,WAAQ,QAAR,CAAiB,KAAK,KAAL,CAAW,SAA5B,EAAuC,KAAK,KAAL,CAAW,SAAlD,EAA6D,KAAK,KAAL,CAAW,OAAxE,EACE,IADF,CACO,UAAS,IAAT,EAAc;AACnB,QAAI,QAAQ,KAAK,KAAL,CAAW,OAAvB,EACA;AACC,UAAK,QAAL,CAAc;AACb,eAAS;AADI,MAAd;AAGA;;;;;;;AAOD,IAbK,CAaJ,IAbI,CAaC,IAbD,CADP;AAeA;AACD,EA3C2B;;;;;AAgD5B,WAAU,kBAAS,QAAT,EAAmB,QAAnB,EAA6B,MAA7B,EAAoC;AAC7C,UAAQ,GAAR,CAAY,MAAZ;AACA,OAAK,QAAL,CAAc;AACb,cAAW,QADE;AAEb,cAAW,QAFE;AAGb,YAAS;AAHI,GAAd;AAKA,EAvD2B;;2EA0D5B,QAAQ,kBAAU;AACjB,UAAQ,GAAR,CAAY,gBAAZ,EAA8B,KAAK,KAAL,CAAW,OAAzC;;AAEA,SAEC;AAAA;AAAA,KAAK,WAAU,gBAAf;AAGC,uBAAC,KAAD,IAAO,cAAc,KAAK,QAA1B,GAHD;AAMC,uBAAC,OAAD,IAAS,SAAS,KAAK,KAAL,CAAW,OAA7B;AAND,GAFD;AAaA;AA1E2B,CAAlB,CAAX;;;AA8EA,eAAe,IAAf","file":"/imports/ui/join.js.map","sourcesContent":["var React = require('react');\nvar Router = require('react-router');\nvar Query = require('./Search/Query');\nvar Results = require('./Search/Results');\n\nvar Join = React.createClass({\n\n\t/*Here we set the initial state variables (this allows us to propagate the variables for maniuplation by the children components*/\n\t/*Also note the \"resuls\" state. This will be where we hold the data from our results*/\n\tgetInitialState: function(){\n\t\treturn { \n\t\t\tqueryTerm: \"\",\n\t\t\tstartYear: \"\",\n\t\t\tendYear: \"\",\n\t\t\tresults: {}\n\t\t}\n\t},\n\n\n\t/*This function gets called if the user searches for a completely new set of parameters (i.e. if any of the search terms changes)*/\n\t/*If the user searches for the exact same thing, then React will ignore it.*/\n\tcomponentDidUpdate: function(prevProps, prevState){\n\t\tconsole.log(\"COMPONENT UPDATED\");\n\t\tconsole.log(this.state.queryTerm);\n\t\tconsole.log(this.state.startYear);\n\t\tconsole.log(this.state.endYear);\n\n\t\tconsole.log(\"Previous State\", prevState);\n\n\t\t\n\t\tif (this.state.queryTerm != \"\" && (prevState.queryTerm != this.state.queryTerm || prevState.startYear != this.state.startYear || prevState.endYear != this.state.endYear))\n\t\t{\n\t\t\thelpers.runQuery(this.state.queryTerm, this.state.startYear, this.state.endYear)\n\t\t\t\t.then(function(data){\n\t\t\t\t\tif (data != this.state.results)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setState({\n\t\t\t\t\t\t\tresults: data\n\t\t\t\t\t\t})\t\t\n\t\t\t\t\t}\n\n\t\t\t\t// console.log(\"RESULTS\", results)\n\t\t\t\t// console.log(\"DATA\", data)\n\n\t\t\t\t// This code is necessary to bind the keyword \"this\" when we say this.setState \n\t\t\t\t// to actually mean the component itself and not the runQuery function.\n\t\t\t\t}.bind(this))\t\t\t\n\t\t}\n\t},\n\n\t// This function will be passed down into children components so they can change the \"parent\"\n\t// i.e we will pass this method to the query component that way it can change the main component \n\t// to perform a new search\n\tsetQuery: function(newQuery, newStart, newEnd){\n\t\tconsole.log(\"TEST\");\n\t\tthis.setState({\n\t\t\tqueryTerm: newQuery,\n\t\t\tstartYear: newStart,\n\t\t\tendYear: newEnd\n\t\t})\n\t},\n\n\t/*Render the function. Note how we deploy both the Query and the Results*/\n\trender: function(){\n\t\tconsole.log(\"Render Results\", this.state.results)\n\n\t\treturn(\n\n\t\t\t<div className=\"main-container\"> \n\n\t\t\t\t{/*Note how we pass the setQuery function to enable Query to perform searches*/}\n\t\t\t\t<Query updateSearch={this.setQuery} />\n\n\t\t\t\t{/*Note how we pass in the results into this component*/}\n\t\t\t\t<Results results={this.state.results}/>\n\n\t\t\t</div>\n\n\t\t)\n\t}\n});\n\n// Export the module back to the route\nexport default Join;"]},"hash":"c94c9af14f56db137795991b78a77e30bbc31b8f"}
