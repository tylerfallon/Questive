{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"lodash","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"_"}]},{"source":"meteor/jagi:astronomy","imported":["Class","Behavior"],"specifiers":[{"kind":"named","imported":"Class","local":"Class"},{"kind":"named","imported":"Behavior","local":"Behavior"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/jagi:astronomy/test/utils.js","filenameRelative":"/packages/jagi:astronomy/test/utils.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/jagi:astronomy/test/utils.js.map","sourceFileName":"/packages/jagi:astronomy/test/utils.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"utils"},"ignored":false,"code":"var _;module.import('lodash',{\"default\":function(v){_=v}});var Class,Behavior;module.import('meteor/jagi:astronomy',{\"Class\":function(v){Class=v},\"Behavior\":function(v){Behavior=v}});\n\n\nresetDatabase = function resetDatabase() {\n\t_.forOwn(Class.classes, function (Class) {\n\t\tvar Collection = Class.getCollection();\n\t\tif (!Collection) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove documents from the collection.\n\t\tCollection.find().forEach(function (doc) {\n\t\t\tCollection.remove(doc._id);\n\t\t});\n\t});\n};\n\nresetMethods = function resetMethods() {\n\t_.forOwn(Class.classes, function (Class) {\n\t\tvar Collection = Class.getCollection();\n\t\tif (!Collection) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar methodHandlers = void 0;\n\t\tif (Meteor.connection) {\n\t\t\tmethodHandlers = Meteor.connection._methodHandlers;\n\t\t} else if (Meteor.server) {\n\t\t\tmethodHandlers = Meteor.server.method_handlers;\n\t\t}\n\t\tif (!methodHandlers) {\n\t\t\treturn;\n\t\t}\n\n\t\tdelete methodHandlers['/' + Collection._name + '/insert'];\n\t\tdelete methodHandlers['/' + Collection._name + '/update'];\n\t\tdelete methodHandlers['/' + Collection._name + '/remove'];\n\t});\n};\n\nreset = function reset() {\n\tresetDatabase();\n\tresetMethods();\n\n\tClass.classes = {};\n\tBehavior.behaviors = {};\n};","ast":null,"map":{"version":3,"sources":["/packages/jagi:astronomy/test/utils.js"],"names":[],"mappings":"AAAA,OAAO,CAAP,MAAc,QAAd;AACA,SAAS,KAAT,EAAgB,QAAhB,QAAgC,uBAAhC;;AAEA,gBAAgB,yBAAW;AAC1B,GAAE,MAAF,CAAS,MAAM,OAAf,EAAwB,UAAS,KAAT,EAAgB;AACvC,MAAI,aAAa,MAAM,aAAN,EAAjB;AACA,MAAI,CAAC,UAAL,EAAiB;AAChB;AACA;;;AAGD,aAAW,IAAX,GAAkB,OAAlB,CAA0B,UAAS,GAAT,EAAc;AACvC,cAAW,MAAX,CAAkB,IAAI,GAAtB;AACA,GAFD;AAGA,EAVD;AAWA,CAZD;;AAcA,eAAe,wBAAW;AACxB,GAAE,MAAF,CAAS,MAAM,OAAf,EAAwB,UAAS,KAAT,EAAgB;AACxC,MAAI,aAAa,MAAM,aAAN,EAAjB;AACA,MAAI,CAAC,UAAL,EAAiB;AAChB;AACA;;AAED,MAAI,uBAAJ;AACA,MAAI,OAAO,UAAX,EAAuB;AACtB,oBAAiB,OAAO,UAAP,CAAkB,eAAnC;AACA,GAFD,MAGK,IAAI,OAAO,MAAX,EAAmB;AACvB,oBAAiB,OAAO,MAAP,CAAc,eAA/B;AACA;AACD,MAAI,CAAC,cAAL,EAAqB;AACpB;AACA;;AAED,SAAO,eAAe,MAAM,WAAW,KAAjB,GAAyB,SAAxC,CAAP;AACA,SAAO,eAAe,MAAM,WAAW,KAAjB,GAAyB,SAAxC,CAAP;AACA,SAAO,eAAe,MAAM,WAAW,KAAjB,GAAyB,SAAxC,CAAP;AACA,EApBA;AAqBD,CAtBD;;AAwBA,QAAQ,iBAAW;AAClB;AACA;;AAEA,OAAM,OAAN,GAAgB,EAAhB;AACA,UAAS,SAAT,GAAqB,EAArB;AACA,CAND","file":"/packages/jagi:astronomy/test/utils.js.map","sourcesContent":["import _ from 'lodash';\nimport { Class, Behavior } from 'meteor/jagi:astronomy';\n\nresetDatabase = function() {\n\t_.forOwn(Class.classes, function(Class) {\n\t\tlet Collection = Class.getCollection();\n\t\tif (!Collection) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove documents from the collection.\n\t\tCollection.find().forEach(function(doc) {\n\t\t\tCollection.remove(doc._id);\n\t\t});\n\t});\n};\n\nresetMethods = function() {\n  _.forOwn(Class.classes, function(Class) {\n\t\tlet Collection = Class.getCollection();\n\t\tif (!Collection) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet methodHandlers;\n\t\tif (Meteor.connection) {\n\t\t\tmethodHandlers = Meteor.connection._methodHandlers;\n\t\t}\n\t\telse if (Meteor.server) {\n\t\t\tmethodHandlers = Meteor.server.method_handlers;\n\t\t}\n\t\tif (!methodHandlers) {\n\t\t\treturn;\n\t\t}\n\n\t\tdelete methodHandlers['/' + Collection._name + '/insert'];\n\t\tdelete methodHandlers['/' + Collection._name + '/update'];\n\t\tdelete methodHandlers['/' + Collection._name + '/remove'];\n\t});\n};\n\nreset = function() {\n\tresetDatabase();\n\tresetMethods();\n\n\tClass.classes = {};\n\tBehavior.behaviors = {};\n};"]},"hash":"81536515f7e48ba4bc3ace983455c6866e1fbbfe"}
